<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GENERIC_SERVER: generic_server Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="../../classes.html"><span>Classes</span></a></li>
    <li><a href="../../files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="../../classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>generic_server Class Reference</h1><!-- doxytag: class="generic_server" -->This is a singleton class and provides framework functionality.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="../../d0/d3a/generic__server_8h-source.html">generic_server.h</a>&gt;</code>
<p>
<a href="../../db/d04/classgeneric__server-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#3ff29efcbe0e580573610bb189e28747">init</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b2642379662463b93d4c1cbb017b40df"></a><!-- doxytag: member="generic_server::log" ref="b2642379662463b93d4c1cbb017b40df" args="(unsigned int, unsigned int, char *)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a> (unsigned int, unsigned int, char *)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">enables logging to framework managed log file. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="89052fd658c432d1b53a2e171f4bcdb6"></a><!-- doxytag: member="generic_server::log" ref="89052fd658c432d1b53a2e171f4bcdb6" args="(unsigned int, unsigned int, string)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#89052fd658c432d1b53a2e171f4bcdb6">log</a> (unsigned int, unsigned int, string)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">enables logging to framework managed log file. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b7bccc17d0e08ccec996fd83cb5f7900"></a><!-- doxytag: member="generic_server::get_log_size" ref="b7bccc17d0e08ccec996fd83cb5f7900" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#b7bccc17d0e08ccec996fd83cb5f7900">get_log_size</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2cd6e2a3d713811ee5a2947180c92e35"></a><!-- doxytag: member="generic_server::rollover_logs" ref="2cd6e2a3d713811ee5a2947180c92e35" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#2cd6e2a3d713811ee5a2947180c92e35">rollover_logs</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rolls over log files, configured in Master configuation file. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a88e9330f71701ca27da81975f6ffed6"></a><!-- doxytag: member="generic_server::close_log" ref="a88e9330f71701ca27da81975f6ffed6" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#a88e9330f71701ca27da81975f6ffed6">close_log</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f5efb092df0bbe52b821cb1b39fc4715"></a><!-- doxytag: member="generic_server::sock_init" ref="f5efb092df0bbe52b821cb1b39fc4715" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#f5efb092df0bbe52b821cb1b39fc4715">sock_init</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Really useful only for Windows, just invokes WSAStartup API. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="05de8fb15760d50751828a79cc247046"></a><!-- doxytag: member="generic_server::swap_bytes" ref="05de8fb15760d50751828a79cc247046" args="(unsigned char *key)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#05de8fb15760d50751828a79cc247046">swap_bytes</a> (unsigned char *key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A simple utility to swap upper / lower 8 bytes of a 16 bytes buffer. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#ffc70f3376e846e0aafc8a3b62f5864c">bb_getline</a> (char *sav_buffer, size_t length, size_t conn_s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="875ce22359fca09730b4b622342813c1"></a><!-- doxytag: member="generic_server::bb_getline" ref="875ce22359fca09730b4b622342813c1" args="(char *sav_buffer, size_t length, size_t conn_s, int)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#875ce22359fca09730b4b622342813c1">bb_getline</a> (char *sav_buffer, size_t length, size_t conn_s, int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8863ab3bcc90a06b38e32324b44fa06f"></a><!-- doxytag: member="generic_server::get_status" ref="8863ab3bcc90a06b38e32324b44fa06f" args="(unsigned char *buff)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#8863ab3bcc90a06b38e32324b44fa06f">get_status</a> (unsigned char *buff)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3523c6f6346855f4de64c8a5aa52b01f"></a><!-- doxytag: member="generic_server::get_cur_time" ref="3523c6f6346855f4de64c8a5aa52b01f" args="(void)" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#3523c6f6346855f4de64c8a5aa52b01f">get_cur_time</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7f6a9a75bce1ca8e908def02f599677a"></a><!-- doxytag: member="generic_server::trim" ref="7f6a9a75bce1ca8e908def02f599677a" args="(const std::string &amp;)" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#7f6a9a75bce1ca8e908def02f599677a">trim</a> (const std::string &amp;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d102276c60995e397d177ff6040387ff"></a><!-- doxytag: member="generic_server::socket_close" ref="d102276c60995e397d177ff6040387ff" args="(SOCKET)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#d102276c60995e397d177ff6040387ff">socket_close</a> (SOCKET)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="dbf41451c13ef0afda5915d970fff1a5"></a><!-- doxytag: member="generic_server::close_thread_ids" ref="dbf41451c13ef0afda5915d970fff1a5" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#dbf41451c13ef0afda5915d970fff1a5">close_thread_ids</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">SOCKET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#a719b834eee76ad510385ce40a415adc">create_socket</a> (int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f616e3856c26f318b0decd0face88d9c"></a><!-- doxytag: member="generic_server::get_verify_client" ref="f616e3856c26f318b0decd0face88d9c" args="(void)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#f616e3856c26f318b0decd0face88d9c">get_verify_client</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="be23652cdb34d9cca7726429bdfd4cb5"></a><!-- doxytag: member="generic_server::set_verify_client" ref="be23652cdb34d9cca7726429bdfd4cb5" args="(bool)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>set_verify_client</b> (bool)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3b65da5e615e62d6633cbabc1e3daa49"></a><!-- doxytag: member="generic_server::check_enabled_plugin" ref="3b65da5e615e62d6633cbabc1e3daa49" args="(string)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#3b65da5e615e62d6633cbabc1e3daa49">check_enabled_plugin</a> (string)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2caab11d24ac217e97ea24b325a94183"></a><!-- doxytag: member="generic_server::check_allocated_port" ref="2caab11d24ac217e97ea24b325a94183" args="(string in_plugin_id, string in_plugin_port)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#2caab11d24ac217e97ea24b325a94183">check_allocated_port</a> (string in_plugin_id, string in_plugin_port)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="27b5fec6f60fe2888606e29c5dc6469b"></a><!-- doxytag: member="generic_server::set_conf_file" ref="27b5fec6f60fe2888606e29c5dc6469b" args="(char *cfile)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#27b5fec6f60fe2888606e29c5dc6469b">set_conf_file</a> (char *cfile)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ab1f1ee912db78aeb5dca44b64622a0a"></a><!-- doxytag: member="generic_server::set_process_name" ref="ab1f1ee912db78aeb5dca44b64622a0a" args="(char *cfile)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#ab1f1ee912db78aeb5dca44b64622a0a">set_process_name</a> (char *cfile)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="941d9dd14f4cea3e87d0072c24e2c063"></a><!-- doxytag: member="generic_server::reload_conf_file" ref="941d9dd14f4cea3e87d0072c24e2c063" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#941d9dd14f4cea3e87d0072c24e2c063">reload_conf_file</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cebad9d5931a8aa9d62f8aa16d60301b"></a><!-- doxytag: member="generic_server::get_command_port" ref="cebad9d5931a8aa9d62f8aa16d60301b" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#cebad9d5931a8aa9d62f8aa16d60301b">get_command_port</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b98dd74bccc571f3f1ab75bd2d931b62"></a><!-- doxytag: member="generic_server::plugin_read_conf_file" ref="b98dd74bccc571f3f1ab75bd2d931b62" args="(GENERIC_PLUGIN *, int thread_no)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#b98dd74bccc571f3f1ab75bd2d931b62">plugin_read_conf_file</a> (<a class="el" href="../../d9/ddf/classgeneric__plugin.html">GENERIC_PLUGIN</a> *, int thread_no)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="fc2d0b0ad83a3826c3d058734247de8e"></a><!-- doxytag: member="generic_server::syslog_msg" ref="fc2d0b0ad83a3826c3d058734247de8e" args="(unsigned int debug_level, unsigned int verbose_level, string data)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#fc2d0b0ad83a3826c3d058734247de8e">syslog_msg</a> (unsigned int debug_level, unsigned int verbose_level, string data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6ec0d7dbe57f972ff9d0b7e074cc0f6c"></a><!-- doxytag: member="generic_server::get_framework_version" ref="6ec0d7dbe57f972ff9d0b7e074cc0f6c" args="(void)" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#6ec0d7dbe57f972ff9d0b7e074cc0f6c">get_framework_version</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4422e8d743887902ece4bce62fbaccd7"></a><!-- doxytag: member="generic_server::print_key_message" ref="4422e8d743887902ece4bce62fbaccd7" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#4422e8d743887902ece4bce62fbaccd7">print_key_message</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4a8e9fca073986f2259807c804aa88f3"></a><!-- doxytag: member="generic_server::get_thread_id" ref="4a8e9fca073986f2259807c804aa88f3" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#4a8e9fca073986f2259807c804aa88f3">get_thread_id</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3db284fc9ca40420e1b48529e2c242a1"></a><!-- doxytag: member="generic_server::rel_thread_id" ref="3db284fc9ca40420e1b48529e2c242a1" args="(int)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#3db284fc9ca40420e1b48529e2c242a1">rel_thread_id</a> (int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#8c160e8f25a8a8aca07023cf8b69c5d7">check_plugin_aliases</a> (vector&lt; string &gt; &amp;alias)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="91e46f61d3a759ecf0c04dddfe492cc9"></a><!-- doxytag: member="generic_server::set_plugins_path" ref="91e46f61d3a759ecf0c04dddfe492cc9" args="(vector&lt; string &gt; &amp;plugin_parms)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#91e46f61d3a759ecf0c04dddfe492cc9">set_plugins_path</a> (vector&lt; string &gt; &amp;plugin_parms)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="646b4875f6897f1211be93bd4f3f1c5d"></a><!-- doxytag: member="generic_server::get_plugins_path" ref="646b4875f6897f1211be93bd4f3f1c5d" args="()" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#646b4875f6897f1211be93bd4f3f1c5d">get_plugins_path</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f48ce920374208468c6ba771ffd96dbf"></a><!-- doxytag: member="generic_server::setnonblocking" ref="f48ce920374208468c6ba771ffd96dbf" args="(SOCKET)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#f48ce920374208468c6ba771ffd96dbf">setnonblocking</a> (SOCKET)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f1f6d2b75cfc4f695a4d6f43b107e73e"></a><!-- doxytag: member="generic_server::setblocking" ref="f1f6d2b75cfc4f695a4d6f43b107e73e" args="(SOCKET)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#f1f6d2b75cfc4f695a4d6f43b107e73e">setblocking</a> (SOCKET)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="215c34721e56d68e0f01ecde3b32ac05"></a><!-- doxytag: member="generic_server::get_thread_sync_mutex" ref="215c34721e56d68e0f01ecde3b32ac05" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#215c34721e56d68e0f01ecde3b32ac05">get_thread_sync_mutex</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="14e3fef48b79953ad963c407ccdf602d"></a><!-- doxytag: member="generic_server::rel_thread_sync_mutex" ref="14e3fef48b79953ad963c407ccdf602d" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#14e3fef48b79953ad963c407ccdf602d">rel_thread_sync_mutex</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="21a4fa59690bea096fef60f384a29185"></a><!-- doxytag: member="generic_server::ssl_async_write" ref="21a4fa59690bea096fef60f384a29185" args="(SSL *ssl, char *buf, int size)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#21a4fa59690bea096fef60f384a29185">ssl_async_write</a> (SSL *ssl, char *buf, int size)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6d30c0541e72deac1d169811132eb798"></a><!-- doxytag: member="generic_server::ssl_async_read" ref="6d30c0541e72deac1d169811132eb798" args="(SSL *ssl, char *buf, int size)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#6d30c0541e72deac1d169811132eb798">ssl_async_read</a> (SSL *ssl, char *buf, int size)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="626bc50a630b4e8b64e15c412451dd8c"></a><!-- doxytag: member="generic_server::ssl_async_accept" ref="626bc50a630b4e8b64e15c412451dd8c" args="(SSL *ssl)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#626bc50a630b4e8b64e15c412451dd8c">ssl_async_accept</a> (SSL *ssl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ec8c415f924a9100423f8c2cd4221c7e"></a><!-- doxytag: member="generic_server::split" ref="ec8c415f924a9100423f8c2cd4221c7e" args="(const string &amp;s, const string &amp;delim, const bool keep_empty)" -->
vector&lt; string &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#ec8c415f924a9100423f8c2cd4221c7e">split</a> (const string &amp;s, const string &amp;delim, const bool keep_empty)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d9/ddf/classgeneric__plugin.html">GENERIC_PLUGIN</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#6f2ff972bd2afdc6aadd94e2f6fe5504">load_shared_lib</a> (string library_image, string)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6beabe64cf46a6e339773975676de708"></a><!-- doxytag: member="generic_server::unload_shared_lib" ref="6beabe64cf46a6e339773975676de708" args="(string plugin_type)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#6beabe64cf46a6e339773975676de708">unload_shared_lib</a> (string plugin_type)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8e1dd52b403bf5dcfc580b3b6d4823fb"></a><!-- doxytag: member="generic_server::get_start_iterator" ref="8e1dd52b403bf5dcfc580b3b6d4823fb" args="(void)" -->
vector&lt; <a class="el" href="../../d9/ddf/classgeneric__plugin.html">GENERIC_PLUGIN</a> <br>
* &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#8e1dd52b403bf5dcfc580b3b6d4823fb">get_start_iterator</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a087322da9d7065217db7cfe02180b42"></a><!-- doxytag: member="generic_server::get_end_iterator" ref="a087322da9d7065217db7cfe02180b42" args="(void)" -->
vector&lt; <a class="el" href="../../d9/ddf/classgeneric__plugin.html">GENERIC_PLUGIN</a> <br>
* &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#a087322da9d7065217db7cfe02180b42">get_end_iterator</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5baae3cb5567ddf49389d6c2615ad040"></a><!-- doxytag: member="generic_server::instance" ref="5baae3cb5567ddf49389d6c2615ad040" args="(void)" -->
static <a class="el" href="../../d8/d97/classgeneric__server.html">generic_server</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#5baae3cb5567ddf49389d6c2615ad040">instance</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Instantiate tis singleton class only once and return pointer to instantiated object later on.. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2f5ac493906c3268ac162e64fe671b0d"></a><!-- doxytag: member="generic_server::itr" ref="2f5ac493906c3268ac162e64fe671b0d" args="" -->
vector&lt; <a class="el" href="../../d9/ddf/classgeneric__plugin.html">GENERIC_PLUGIN</a> <br>
* &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#2f5ac493906c3268ac162e64fe671b0d">itr</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5b81b88b8b8f93b0bc0f1b78510f942f"></a><!-- doxytag: member="generic_server::v" ref="5b81b88b8b8f93b0bc0f1b78510f942f" args="" -->
vector&lt; <a class="el" href="../../d9/ddf/classgeneric__plugin.html">GENERIC_PLUGIN</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#5b81b88b8b8f93b0bc0f1b78510f942f">v</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Vector to hold all plug-ins. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3fc8ed716fd647232294ab51eb5436e9"></a><!-- doxytag: member="generic_server::timeout_seconds" ref="3fc8ed716fd647232294ab51eb5436e9" args="" -->
unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#3fc8ed716fd647232294ab51eb5436e9">timeout_seconds</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ae036a55c9e0c7bbcaff3b65e1b943e1"></a><!-- doxytag: member="generic_server::max_threads" ref="ae036a55c9e0c7bbcaff3b65e1b943e1" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#ae036a55c9e0c7bbcaff3b65e1b943e1">max_threads</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="fc8a86b6435960b38ad2836559a5c7dd"></a><!-- doxytag: member="generic_server::command_port" ref="fc8a86b6435960b38ad2836559a5c7dd" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#fc8a86b6435960b38ad2836559a5c7dd">command_port</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a4b158b480cdf7e82f873393d4682d3d"></a><!-- doxytag: member="generic_server::log_file" ref="a4b158b480cdf7e82f873393d4682d3d" args="" -->
ofstream&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#a4b158b480cdf7e82f873393d4682d3d">log_file</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2c7155dd3a5c4677702ec068864b6201"></a><!-- doxytag: member="generic_server::logname" ref="2c7155dd3a5c4677702ec068864b6201" args="" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#2c7155dd3a5c4677702ec068864b6201">logname</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9f739db18cb300d0f17215c93e59c039"></a><!-- doxytag: member="generic_server::dll_handles" ref="9f739db18cb300d0f17215c93e59c039" args="" -->
map&lt; string, void * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#9f739db18cb300d0f17215c93e59c039">dll_handles</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="30f76d8a32fadebba59ae4cd81324e6c"></a><!-- doxytag: member="generic_server::thread_ids" ref="30f76d8a32fadebba59ae4cd81324e6c" args="" -->
map&lt; int, <a class="el" href="../../d7/d94/structthread__info.html">THREAD_INFO</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#30f76d8a32fadebba59ae4cd81324e6c">thread_ids</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Map to store all currently running threads. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="357d142f41337b54c3ae386ea02cc1a5"></a><!-- doxytag: member="generic_server::factory" ref="357d142f41337b54c3ae386ea02cc1a5" args="" -->
map&lt; string, <a class="el" href="../../d7/d71/generic__server_8h.html#3d28a25e45080e8cafdb15c64c0f8ea0">create_fp</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#357d142f41337b54c3ae386ea02cc1a5">factory</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Map that has function pointers to 'create_instance()' factory method for all plug-in libraries. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="39ed74538b01e2e96440d192d7fa515a"></a><!-- doxytag: member="generic_server::sslserver" ref="39ed74538b01e2e96440d192d7fa515a" args="" -->
<a class="el" href="../../d1/d7e/classSSLServer.html">SSLServer</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#39ed74538b01e2e96440d192d7fa515a">sslserver</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5f09714bfd7f02fa494b8e8368390e7b"></a><!-- doxytag: member="generic_server::syslog_flag" ref="5f09714bfd7f02fa494b8e8368390e7b" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#5f09714bfd7f02fa494b8e8368390e7b">syslog_flag</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5f8c18c5449ef7caef10feb698aad367"></a><!-- doxytag: member="generic_server::bootstrap_jobs" ref="5f8c18c5449ef7caef10feb698aad367" args="" -->
map&lt; string, bool &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#5f8c18c5449ef7caef10feb698aad367">bootstrap_jobs</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f993a53840cf28fedd03a6df82a32857"></a><!-- doxytag: member="generic_server::server_cert" ref="f993a53840cf28fedd03a6df82a32857" args="" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#f993a53840cf28fedd03a6df82a32857">server_cert</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">TLS certificate stuff. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e13015cb44387fd44c1d6e8992e1f963"></a><!-- doxytag: member="generic_server::rsa_private_key" ref="e13015cb44387fd44c1d6e8992e1f963" args="" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#e13015cb44387fd44c1d6e8992e1f963">rsa_private_key</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5b7ee1d53af3fd3f985cf5f89f8eb272"></a><!-- doxytag: member="generic_server::ca_certificate" ref="5b7ee1d53af3fd3f985cf5f89f8eb272" args="" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#5b7ee1d53af3fd3f985cf5f89f8eb272">ca_certificate</a></td></tr>

<tr><td colspan="2"><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3071e1b18f12acfc8ab5adcd0f8e4d46"></a><!-- doxytag: member="generic_server::pinstance" ref="3071e1b18f12acfc8ab5adcd0f8e4d46" args="" -->
static <a class="el" href="../../d8/d97/classgeneric__server.html">generic_server</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#3071e1b18f12acfc8ab5adcd0f8e4d46">pinstance</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to singleton framework instance. <br></td></tr>
<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4fcb22c2fc61455ceefa4d2d6fbb9e29"></a><!-- doxytag: member="generic_server::generic_server" ref="4fcb22c2fc61455ceefa4d2d6fbb9e29" args="(void)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#4fcb22c2fc61455ceefa4d2d6fbb9e29">generic_server</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="063e1ad2bd464a5200475a65bd2013e9"></a><!-- doxytag: member="generic_server::get_log_file_mutex" ref="063e1ad2bd464a5200475a65bd2013e9" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#063e1ad2bd464a5200475a65bd2013e9">get_log_file_mutex</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ec7cbd1bfb850f3db7478befc65424f8"></a><!-- doxytag: member="generic_server::rel_log_file_mutex" ref="ec7cbd1bfb850f3db7478befc65424f8" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#ec7cbd1bfb850f3db7478befc65424f8">rel_log_file_mutex</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3fd5b6c44af35a719cf51dbb3f445b63"></a><!-- doxytag: member="generic_server::get_server_params" ref="3fd5b6c44af35a719cf51dbb3f445b63" args="(string, int)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#3fd5b6c44af35a719cf51dbb3f445b63">get_server_params</a> (string, int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b1720702398281d494b6fa9d2a9c7c16"></a><!-- doxytag: member="generic_server::tls_setup" ref="b1720702398281d494b6fa9d2a9c7c16" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#b1720702398281d494b6fa9d2a9c7c16">tls_setup</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes TLS. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ece28edafb633b642b69c4d693c0574e"></a><!-- doxytag: member="generic_server::remove_devices" ref="ece28edafb633b642b69c4d693c0574e" args="(map&lt; string, int &gt; &amp;new_ports)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#ece28edafb633b642b69c4d693c0574e">remove_devices</a> (map&lt; string, int &gt; &amp;new_ports)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is invoked when any plug-in entry gets removed from Master configuration file and framework gets signaled. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ed0a00870f2eb457f03e00353752c06f"></a><!-- doxytag: member="generic_server::remove_all_aliases" ref="ed0a00870f2eb457f03e00353752c06f" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#ed0a00870f2eb457f03e00353752c06f">remove_all_aliases</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d9/ddf/classgeneric__plugin.html">GENERIC_PLUGIN</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#4fbc9156965f65f09310cf64e954abdd">initialize_plugin_object</a> (vector&lt; string &gt; plugin_parms, <a class="el" href="../../d9/ddf/classgeneric__plugin.html">GENERIC_PLUGIN</a> *plugin)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="414380176b48d66fb30cc8b80f736ab8"></a><!-- doxytag: member="generic_server::tls_initialize" ref="414380176b48d66fb30cc8b80f736ab8" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#414380176b48d66fb30cc8b80f736ab8">tls_initialize</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Validates <a class="el" href="../../d8/d97/classgeneric__server.html">generic_server</a> framework and CA certificates, calls <a class="el" href="../../d8/d97/classgeneric__server.html#b1720702398281d494b6fa9d2a9c7c16">tls_setup()</a>. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f3647cdd3aa5431263fcbce38fa8471f"></a><!-- doxytag: member="generic_server::set_access_control" ref="f3647cdd3aa5431263fcbce38fa8471f" args="(char daemon_flag)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#f3647cdd3aa5431263fcbce38fa8471f">set_access_control</a> (char daemon_flag)</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="de9de74342d5f8c9e782e90051ce62a8"></a><!-- doxytag: member="generic_server::iResult" ref="de9de74342d5f8c9e782e90051ce62a8" args="" -->
unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#de9de74342d5f8c9e782e90051ce62a8">iResult</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="38ff93b9b41a964eb2ecc01d001c7d58"></a><!-- doxytag: member="generic_server::tls_setup_reqd" ref="38ff93b9b41a964eb2ecc01d001c7d58" args="" -->
unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#38ff93b9b41a964eb2ecc01d001c7d58">tls_setup_reqd</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="aa06b092afd95ebf19895368cd101b30"></a><!-- doxytag: member="generic_server::conf_file" ref="aa06b092afd95ebf19895368cd101b30" args="" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#aa06b092afd95ebf19895368cd101b30">conf_file</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5bf99e00a763f517188f7843730f8a07"></a><!-- doxytag: member="generic_server::process_name" ref="5bf99e00a763f517188f7843730f8a07" args="" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#5bf99e00a763f517188f7843730f8a07">process_name</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="11f9dce544833309d48a32d69123ea4d"></a><!-- doxytag: member="generic_server::plugins_path" ref="11f9dce544833309d48a32d69123ea4d" args="" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#11f9dce544833309d48a32d69123ea4d">plugins_path</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b33434ef3318edce12f9727c414d0d09"></a><!-- doxytag: member="generic_server::log_file_mutex" ref="b33434ef3318edce12f9727c414d0d09" args="" -->
pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#b33434ef3318edce12f9727c414d0d09">log_file_mutex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7fff81828e69048efc0d47fe5ece68ea"></a><!-- doxytag: member="generic_server::thread_cnt_mutex" ref="7fff81828e69048efc0d47fe5ece68ea" args="" -->
pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#7fff81828e69048efc0d47fe5ece68ea">thread_cnt_mutex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="21f4a1283bcf7442e851b494dcc7b8cc"></a><!-- doxytag: member="generic_server::thread_sync_mutex" ref="21f4a1283bcf7442e851b494dcc7b8cc" args="" -->
pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#21f4a1283bcf7442e851b494dcc7b8cc">thread_sync_mutex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0a86ab44409da7589c08a865e3b588dd"></a><!-- doxytag: member="generic_server::max_log_size" ref="0a86ab44409da7589c08a865e3b588dd" args="" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#0a86ab44409da7589c08a865e3b588dd">max_log_size</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ddd17fab37bff74d9104f386cfee6c30"></a><!-- doxytag: member="generic_server::max_logs_saved" ref="ddd17fab37bff74d9104f386cfee6c30" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#ddd17fab37bff74d9104f386cfee6c30">max_logs_saved</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="42d0491807552c56a2961dfffa32b6b6"></a><!-- doxytag: member="generic_server::verify_client" ref="42d0491807552c56a2961dfffa32b6b6" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d97/classgeneric__server.html#42d0491807552c56a2961dfffa32b6b6">verify_client</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This is a singleton class and provides framework functionality. 
<p>

<p>
Definition at line <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00083">83</a> of file <a class="el" href="../../d0/d3a/generic__server_8h-source.html">generic_server.h</a>.<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="ffc70f3376e846e0aafc8a3b62f5864c"></a><!-- doxytag: member="generic_server::bb_getline" ref="ffc70f3376e846e0aafc8a3b62f5864c" args="(char *sav_buffer, size_t length, size_t conn_s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int generic_server::bb_getline           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>sav_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>conn_s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Asynchronous socket read utility.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>sav_buffer</em>&nbsp;</td><td>Buffer to store read data. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>Maximum number of bytes to read from socket. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Number of bytes actually read, or zero on error. failure to read any data. </dd></dl>

<p>
Definition at line <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00904">904</a> of file <a class="el" href="../../de/dd9/generic__server_8cpp-source.html">generic_server.cpp</a>.
<p>
References <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00065">MAX_SZ</a>.<div class="fragment"><pre class="fragment"><a name="l00905"></a>00905 {
<a name="l00906"></a>00906         fd_set socks;
<a name="l00907"></a>00907         <span class="keyword">struct </span>timeval timeout;
<a name="l00908"></a>00908         <span class="keywordtype">char</span> str[<a class="code" href="../../d7/d71/generic__server_8h.html#aaad26210242f40f69323a1adcc711ba">MAX_SZ</a>];
<a name="l00909"></a>00909         size_t readsock,t;
<a name="l00910"></a>00910         size_t bytes_recvd;
<a name="l00911"></a>00911 
<a name="l00912"></a>00912     memset(sav_buffer,0,<span class="keyword">sizeof</span>(sav_buffer));
<a name="l00913"></a>00913     memset(str,0,<a class="code" href="../../d7/d71/generic__server_8h.html#aaad26210242f40f69323a1adcc711ba">MAX_SZ</a>);
<a name="l00914"></a>00914     bytes_recvd = 0;
<a name="l00915"></a>00915 
<a name="l00916"></a>00916     <span class="keywordflow">while</span>(1)
<a name="l00917"></a>00917     {
<a name="l00918"></a>00918        FD_ZERO(&amp;socks);
<a name="l00919"></a>00919        FD_SET(conn_s,&amp;socks);
<a name="l00920"></a>00920        timeout.tv_sec = 0;
<a name="l00921"></a>00921        timeout.tv_usec = 50000;    
<a name="l00922"></a>00922        readsock = select((<span class="keywordtype">int</span>)conn_s+1,&amp;socks,NULL,NULL,&amp;timeout);
<a name="l00923"></a>00923        <span class="keywordflow">if</span>(bytes_recvd &amp;&amp; readsock &lt;= 0)
<a name="l00924"></a>00924              <span class="keywordflow">return</span>(bytes_recvd);
<a name="l00925"></a>00925        <span class="keywordflow">if</span>(FD_ISSET(conn_s,&amp;socks))
<a name="l00926"></a>00926        {
<a name="l00927"></a>00927            <span class="keywordflow">if</span> ((t = recv(conn_s,str,<span class="keyword">sizeof</span>(str), 0)) &gt; 0)
<a name="l00928"></a>00928            {
<a name="l00929"></a>00929                                 memcpy(sav_buffer+bytes_recvd,str,t);
<a name="l00930"></a>00930                 bytes_recvd += t;
<a name="l00931"></a>00931                 <span class="keywordflow">if</span>(bytes_recvd &gt;= length)
<a name="l00932"></a>00932                         <span class="keywordflow">return</span>(bytes_recvd);
<a name="l00933"></a>00933            }
<a name="l00934"></a>00934            <span class="keywordflow">else</span>
<a name="l00935"></a>00935                    {
<a name="l00936"></a>00936                <span class="keywordflow">return</span>(bytes_recvd);
<a name="l00937"></a>00937                    }
<a name="l00938"></a>00938        }
<a name="l00939"></a>00939     }
<a name="l00940"></a>00940 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="8c160e8f25a8a8aca07023cf8b69c5d7"></a><!-- doxytag: member="generic_server::check_plugin_aliases" ref="8c160e8f25a8a8aca07023cf8b69c5d7" args="(vector&lt; string &gt; &amp;alias)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool generic_server::check_plugin_aliases           </td>
          <td>(</td>
          <td class="paramtype">vector&lt; string &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>alias</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks for 'alias' plug-ins. An 'alias' is any plug-in that uses the same TCP port of primary plug-in. Framework would use one TCP port/socket to service all 'aliased' plug-ins. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>&amp;alias</em>&nbsp;</td><td>Reference to alias Vector within every </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00290">290</a> of file <a class="el" href="../../de/dd9/generic__server_8cpp-source.html">generic_server.cpp</a>.
<p>
References <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00841">get_end_iterator()</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00834">get_start_iterator()</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00094">log()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00049">LOG_LOW</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00059">PLUGIN_CONF</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00053">PLUGIN_NAME</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00054">PLUGIN_TYPE</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00055">PORT</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00057">SHARED_LIB_PATH</a>, and <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00058">TLS_FLAG</a>.
<p>
Referenced by <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00472">init()</a>, and <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l01060">reload_conf_file()</a>.<div class="fragment"><pre class="fragment"><a name="l00291"></a>00291 {
<a name="l00292"></a>00292         ostringstream oss;
<a name="l00293"></a>00293     vector &lt;GENERIC_PLUGIN *&gt;::iterator it;
<a name="l00294"></a>00294 
<a name="l00295"></a>00295     <span class="keywordflow">for</span>(it = <a class="code" href="../../d8/d97/classgeneric__server.html#8e1dd52b403bf5dcfc580b3b6d4823fb">get_start_iterator</a>(); it != <a class="code" href="../../d8/d97/classgeneric__server.html#a087322da9d7065217db7cfe02180b42">get_end_iterator</a>();it++)
<a name="l00296"></a>00296     {
<a name="l00297"></a>00297         <span class="keywordflow">if</span>( (*it)-&gt;get_plugin_name()    != plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#1ee768562b9caa3b85eaf164209891fe">PLUGIN_NAME</a>)       &amp;&amp;
<a name="l00298"></a>00298             (*it)-&gt;get_plugin()      == plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#e15b5d272c0634f79544a7b24f1d4abb">PLUGIN_TYPE</a>)          &amp;&amp;
<a name="l00299"></a>00299             (*it)-&gt;get_plugin_path() == plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#ef27c6c066fcfa1ad69b35e8fd56b160">SHARED_LIB_PATH</a>)      &amp;&amp;
<a name="l00300"></a>00300                     (*it)-&gt;get_port()        == atoi(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#4e302f269172f2bec464797d045afb76">PORT</a>).c_str())   &amp;&amp; 
<a name="l00301"></a>00301                     (*it)-&gt;get_conf_file()   == plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#4385462b80b4bdf095be53dbe9a61394">PLUGIN_CONF</a>)          &amp;&amp; 
<a name="l00302"></a>00302                     (*it)-&gt;get_tls_flag()    == atoi(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#505d3d6854f1082049dd8e4d7e8a06c5">TLS_FLAG</a>).c_str()) 
<a name="l00303"></a>00303                 )
<a name="l00304"></a>00304                 {
<a name="l00305"></a>00305                         <span class="keywordflow">if</span>(!(*it)-&gt;find_plugin_alias(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#1ee768562b9caa3b85eaf164209891fe">PLUGIN_NAME</a>)))
<a name="l00306"></a>00306                                         (*it)-&gt;add_plugin_alias(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#1ee768562b9caa3b85eaf164209891fe">PLUGIN_NAME</a>));
<a name="l00307"></a>00307             <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00308"></a>00308                 }
<a name="l00309"></a>00309                 <span class="keywordflow">else</span>
<a name="l00310"></a>00310         <span class="keywordflow">if</span>( (*it)-&gt;get_plugin_name()    != plugin_parms.at(PLUGIN_NAME)       &amp;&amp;
<a name="l00311"></a>00311             (*it)-&gt;get_plugin()      == plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#e15b5d272c0634f79544a7b24f1d4abb">PLUGIN_TYPE</a>)          &amp;&amp;
<a name="l00312"></a>00312                     (*it)-&gt;get_port()        == atoi(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#4e302f269172f2bec464797d045afb76">PORT</a>).c_str())   &amp;&amp; 
<a name="l00313"></a>00313                     (*it)-&gt;get_tls_flag()    == atoi(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#505d3d6854f1082049dd8e4d7e8a06c5">TLS_FLAG</a>).c_str()) 
<a name="l00314"></a>00314                 )
<a name="l00315"></a>00315                 {
<a name="l00316"></a>00316                         <span class="keywordflow">if</span>( (*it)-&gt;get_conf_file() != plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#4385462b80b4bdf095be53dbe9a61394">PLUGIN_CONF</a>) ||
<a name="l00317"></a>00317                             (*it)-&gt;get_plugin_path() != plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#ef27c6c066fcfa1ad69b35e8fd56b160">SHARED_LIB_PATH</a>) )
<a name="l00318"></a>00318                         { 
<a name="l00319"></a>00319                                 oss &lt;&lt; <span class="stringliteral">" Ignoring attempted plugin alias for: "</span> &lt;&lt; (*it)-&gt;get_plugin_name() &lt;&lt; <span class="stringliteral">". check alias configuration."</span>;
<a name="l00320"></a>00320                                 <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,oss.str());
<a name="l00321"></a>00321                 <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00322"></a>00322                         }
<a name="l00323"></a>00323                 }
<a name="l00324"></a>00324     }
<a name="l00325"></a>00325     <span class="keywordflow">return</span>(<span class="keyword">false</span>);
<a name="l00326"></a>00326 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a719b834eee76ad510385ce40a415adc"></a><!-- doxytag: member="generic_server::create_socket" ref="a719b834eee76ad510385ce40a415adc" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SOCKET generic_server::create_socket           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a 'listen'ing socket for every plugin, sets socket to 'nonblocking' mode.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>port</em>&nbsp;</td><td>TCP port for socket to bind. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>socket descriptor on success or zero on error. </dd></dl>

<p>
Definition at line <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l01244">1244</a> of file <a class="el" href="../../de/dd9/generic__server_8cpp-source.html">generic_server.cpp</a>.
<p>
References <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00085">INVALID_SOCKET</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00094">log()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00049">LOG_LOW</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l01202">setnonblocking()</a>, <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00081">SOCKET</a>, and <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00084">SOCKET_ERROR</a>.
<p>
Referenced by <a class="el" href="../../dd/d8c/control_8cpp-source.html#l00614">process_data()</a>.<div class="fragment"><pre class="fragment"><a name="l01245"></a>01245 {
<a name="l01246"></a>01246     <a class="code" href="../../db/de0/generic__plugin_8h.html#8b7037c483cc61d0d3d19c0b5280140c">SOCKET</a> ListenSocket;
<a name="l01247"></a>01247     <span class="keyword">struct </span>addrinfo *result = NULL;
<a name="l01248"></a>01248     <span class="keyword">struct </span>sockaddr_in local_address;
<a name="l01249"></a>01249     <span class="keyword">struct </span>addrinfo hints;
<a name="l01250"></a>01250     ostringstream os;
<a name="l01251"></a>01251     <span class="keywordtype">int</span> <a class="code" href="../../d8/d97/classgeneric__server.html#de9de74342d5f8c9e782e90051ce62a8">iResult</a>;
<a name="l01252"></a>01252 
<a name="l01253"></a>01253         os &lt;&lt; port;
<a name="l01254"></a>01254     memset(&amp;local_address,0,<span class="keyword">sizeof</span>(local_address));
<a name="l01255"></a>01255     memset(&amp;hints, 0,<span class="keyword">sizeof</span>(hints));
<a name="l01256"></a>01256     hints.ai_family = AF_INET;
<a name="l01257"></a>01257     hints.ai_socktype = SOCK_STREAM;
<a name="l01258"></a>01258     hints.ai_protocol = IPPROTO_TCP;
<a name="l01259"></a>01259     hints.ai_flags = AI_PASSIVE;
<a name="l01260"></a>01260     iResult = getaddrinfo(NULL, os.str().c_str(), &amp;hints, &amp;result);
<a name="l01261"></a>01261     <span class="keywordflow">if</span> (iResult != 0)
<a name="l01262"></a>01262     {
<a name="l01263"></a>01263         os.str(<span class="stringliteral">""</span>);
<a name="l01264"></a>01264         os.clear();
<a name="l01265"></a>01265         os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN getaddrinfo failed."</span>;
<a name="l01266"></a>01266         <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l01267"></a>01267     }
<a name="l01268"></a>01268     ListenSocket = socket(result-&gt;ai_family, result-&gt;ai_socktype, result-&gt;ai_protocol);
<a name="l01269"></a>01269     <span class="keywordflow">if</span> (ListenSocket == <a class="code" href="../../db/de0/generic__plugin_8h.html#93a095134cccfe36fad1f6e286b0705b">INVALID_SOCKET</a>)
<a name="l01270"></a>01270     {
<a name="l01271"></a>01271         os.str(<span class="stringliteral">""</span>);
<a name="l01272"></a>01272         os.clear();
<a name="l01273"></a>01273         os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN socket creation failed."</span>;
<a name="l01274"></a>01274         <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l01275"></a>01275         freeaddrinfo(result);
<a name="l01276"></a>01276         <span class="keywordflow">return</span> 0;
<a name="l01277"></a>01277     }
<a name="l01278"></a>01278     local_address.sin_family = AF_INET;
<a name="l01279"></a>01279     local_address.sin_addr.s_addr = inet_addr(<span class="stringliteral">"127.0.0.1"</span>);
<a name="l01280"></a>01280     local_address.sin_port = htons(port);
<a name="l01281"></a>01281     iResult = bind(ListenSocket, (sockaddr *) &amp;local_address, (<span class="keywordtype">int</span>)result-&gt;ai_addrlen);
<a name="l01282"></a>01282     <span class="keywordflow">if</span> (iResult != 0)
<a name="l01283"></a>01283     {
<a name="l01284"></a>01284         os.str(<span class="stringliteral">""</span>);
<a name="l01285"></a>01285         os.clear();
<a name="l01286"></a>01286         os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN socket bind failed for port: "</span> &lt;&lt; port;
<a name="l01287"></a>01287         <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l01288"></a>01288         freeaddrinfo(result);
<a name="l01289"></a>01289         shutdown(ListenSocket,2);
<a name="l01290"></a>01290 <span class="preprocessor">#ifdef WINDOWS</span>
<a name="l01291"></a>01291 <span class="preprocessor"></span>        closesocket(ListenSocket);
<a name="l01292"></a>01292 <span class="preprocessor">#else</span>
<a name="l01293"></a>01293 <span class="preprocessor"></span>        close(ListenSocket);
<a name="l01294"></a>01294 <span class="preprocessor">#endif</span>
<a name="l01295"></a>01295 <span class="preprocessor"></span>        <span class="keywordflow">return</span> 0;
<a name="l01296"></a>01296     }
<a name="l01297"></a>01297     iResult = listen(ListenSocket, SOMAXCONN);
<a name="l01298"></a>01298     <span class="keywordflow">if</span> (iResult == <a class="code" href="../../db/de0/generic__plugin_8h.html#b23f7fb1f879b5b330f17bd8a470ff57">SOCKET_ERROR</a>)
<a name="l01299"></a>01299     {
<a name="l01300"></a>01300         os.str(<span class="stringliteral">""</span>);
<a name="l01301"></a>01301         os.clear();
<a name="l01302"></a>01302         os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN socket listen failed for port: "</span> &lt;&lt; port;
<a name="l01303"></a>01303         <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l01304"></a>01304         shutdown(ListenSocket,2);
<a name="l01305"></a>01305 <span class="preprocessor">#ifdef WINDOWS</span>
<a name="l01306"></a>01306 <span class="preprocessor"></span>        closesocket(ListenSocket);
<a name="l01307"></a>01307 <span class="preprocessor">#else</span>
<a name="l01308"></a>01308 <span class="preprocessor"></span>        close(ListenSocket);
<a name="l01309"></a>01309 <span class="preprocessor">#endif</span>
<a name="l01310"></a>01310 <span class="preprocessor"></span>        <span class="keywordflow">return</span> 0;
<a name="l01311"></a>01311     }
<a name="l01312"></a>01312         <a class="code" href="../../d8/d97/classgeneric__server.html#f48ce920374208468c6ba771ffd96dbf">setnonblocking</a>(ListenSocket);
<a name="l01313"></a>01313     <span class="keywordflow">return</span>(ListenSocket);
<a name="l01314"></a>01314 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3ff29efcbe0e580573610bb189e28747"></a><!-- doxytag: member="generic_server::init" ref="3ff29efcbe0e580573610bb189e28747" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int generic_server::init           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reads master configuration file, loads plug-in shared libraries and initializes master Vector to store plug-ins. 
<p>
Definition at line <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00472">472</a> of file <a class="el" href="../../de/dd9/generic__server_8cpp-source.html">generic_server.cpp</a>.
<p>
References <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00290">check_plugin_aliases()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00218">conf_file</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00378">get_server_params()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00060">INIT</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l01138">initialize_plugin_object()</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00599">load_shared_lib()</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00094">log()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00049">LOG_LOW</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00065">MAX_SZ</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00054">PLUGIN_TYPE</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l01120">set_plugins_path()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00057">SHARED_LIB_PATH</a>, <a class="el" href="../../d8/d97/classgeneric__server.html#f5efb092df0bbe52b821cb1b39fc4715">sock_init()</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l01014">split()</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00534">tls_initialize()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00217">tls_setup_reqd</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00703">trim()</a>, and <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00172">v</a>.<div class="fragment"><pre class="fragment"><a name="l00473"></a>00473 {
<a name="l00474"></a>00474         <span class="keywordtype">int</span> ret;
<a name="l00475"></a>00475         <a class="code" href="../../d9/ddf/classgeneric__plugin.html">GENERIC_PLUGIN</a> *plugin;
<a name="l00476"></a>00476         vector&lt;string&gt; plugin_parms;
<a name="l00477"></a>00477         string line,delim,library_image;
<a name="l00478"></a>00478         ostringstream os;
<a name="l00479"></a>00479         
<a name="l00480"></a>00480         ret = 0;
<a name="l00481"></a>00481 <span class="preprocessor">#ifdef WINDOWS</span>
<a name="l00482"></a>00482 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d97/classgeneric__server.html#f5efb092df0bbe52b821cb1b39fc4715">sock_init</a>())
<a name="l00483"></a>00483         {
<a name="l00484"></a>00484                 cout &lt;&lt; <span class="stringliteral">"Can't init socket library! "</span> &lt;&lt; endl;
<a name="l00485"></a>00485         <span class="keywordflow">return</span>(0);
<a name="l00486"></a>00486         }
<a name="l00487"></a>00487         TCHAR filebuf[<a class="code" href="../../d7/d71/generic__server_8h.html#aaad26210242f40f69323a1adcc711ba">MAX_SZ</a>];
<a name="l00488"></a>00488         get_exe_directory(filebuf,<a class="code" href="../../d7/d71/generic__server_8h.html#aaad26210242f40f69323a1adcc711ba">MAX_SZ</a>);
<a name="l00489"></a>00489         SetCurrentDirectory(filebuf);
<a name="l00490"></a>00490 <span class="preprocessor">#endif</span>
<a name="l00491"></a>00491 <span class="preprocessor"></span>        <a class="code" href="../../d8/d97/classgeneric__server.html#38ff93b9b41a964eb2ecc01d001c7d58">tls_setup_reqd</a> = 0;
<a name="l00492"></a>00492         delim = <span class="stringliteral">"|"</span>;
<a name="l00493"></a>00493         ifstream inf(<a class="code" href="../../d8/d97/classgeneric__server.html#aa06b092afd95ebf19895368cd101b30">conf_file</a>.c_str());
<a name="l00494"></a>00494 
<a name="l00495"></a>00495     <span class="keywordflow">if</span>(!inf)
<a name="l00496"></a>00496     {
<a name="l00497"></a>00497         cout &lt;&lt; <span class="stringliteral">" Can't Open file: "</span> &lt;&lt; <a class="code" href="../../d8/d97/classgeneric__server.html#aa06b092afd95ebf19895368cd101b30">conf_file</a> &lt;&lt; endl;
<a name="l00498"></a>00498         <span class="keywordflow">return</span>(0);
<a name="l00499"></a>00499     }   
<a name="l00500"></a>00500     <span class="keywordflow">while</span>(getline(inf, line))
<a name="l00501"></a>00501     {
<a name="l00502"></a>00502                 line = <a class="code" href="../../d8/d97/classgeneric__server.html#7f6a9a75bce1ca8e908def02f599677a">trim</a>(line);
<a name="l00503"></a>00503         <span class="keywordflow">if</span>(line.length() == 0 || line.at(0) == <span class="charliteral">'#'</span>)
<a name="l00504"></a>00504             <span class="keywordflow">continue</span>;
<a name="l00505"></a>00505                 <span class="keywordflow">if</span>(!<a class="code" href="../../d8/d97/classgeneric__server.html#3fd5b6c44af35a719cf51dbb3f445b63">get_server_params</a>(line,<a class="code" href="../../d7/d71/generic__server_8h.html#b12d1c693d0eb56c77a7c0973f5c4810">INIT</a>))
<a name="l00506"></a>00506                         <span class="keywordflow">continue</span>;
<a name="l00507"></a>00507                 plugin_parms = <a class="code" href="../../d8/d97/classgeneric__server.html#ec8c415f924a9100423f8c2cd4221c7e">split</a>(line,delim,<span class="keyword">true</span>);
<a name="l00508"></a>00508                 <span class="keywordflow">if</span>(plugin_parms.size() != 7)
<a name="l00509"></a>00509                         <span class="keywordflow">continue</span>;
<a name="l00510"></a>00510                 <a class="code" href="../../d8/d97/classgeneric__server.html#91e46f61d3a759ecf0c04dddfe492cc9">set_plugins_path</a>(plugin_parms);
<a name="l00511"></a>00511                 <span class="comment">// returns true if PLUGIN_NAME is a new alias or an existing alias</span>
<a name="l00512"></a>00512                 <span class="comment">// generic_plugin will be updated in case of new alias</span>
<a name="l00513"></a>00513                 <span class="keywordflow">if</span>(<a class="code" href="../../d8/d97/classgeneric__server.html#8c160e8f25a8a8aca07023cf8b69c5d7">check_plugin_aliases</a>(plugin_parms))
<a name="l00514"></a>00514                         <span class="keywordflow">continue</span>;
<a name="l00515"></a>00515                 plugin = <a class="code" href="../../d8/d97/classgeneric__server.html#6f2ff972bd2afdc6aadd94e2f6fe5504">load_shared_lib</a>(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#ef27c6c066fcfa1ad69b35e8fd56b160">SHARED_LIB_PATH</a>),plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#e15b5d272c0634f79544a7b24f1d4abb">PLUGIN_TYPE</a>));
<a name="l00516"></a>00516                 <span class="keywordflow">if</span>(plugin == NULL)
<a name="l00517"></a>00517                 {
<a name="l00518"></a>00518                         os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN load_library failed: "</span> &lt;&lt; plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#ef27c6c066fcfa1ad69b35e8fd56b160">SHARED_LIB_PATH</a>) &lt;&lt; <span class="stringliteral">" PLUGIN_TYPE: "</span> &lt;&lt; plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#e15b5d272c0634f79544a7b24f1d4abb">PLUGIN_TYPE</a>) &lt;&lt; endl;
<a name="l00519"></a>00519                         <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l00520"></a>00520                 <span class="keywordflow">return</span> 0;
<a name="l00521"></a>00521                 }
<a name="l00522"></a>00522                 plugin = <a class="code" href="../../d8/d97/classgeneric__server.html#4fbc9156965f65f09310cf64e954abdd">initialize_plugin_object</a>(plugin_parms,plugin);
<a name="l00523"></a>00523                 <span class="keywordflow">if</span>(plugin == NULL)
<a name="l00524"></a>00524                 <span class="keywordflow">return</span>(0);
<a name="l00525"></a>00525                 <a class="code" href="../../d8/d97/classgeneric__server.html#5b81b88b8b8f93b0bc0f1b78510f942f">v</a>.push_back(plugin);
<a name="l00526"></a>00526     }
<a name="l00527"></a>00527         inf.close();
<a name="l00528"></a>00528         <span class="keywordflow">if</span>(!<a class="code" href="../../d8/d97/classgeneric__server.html#414380176b48d66fb30cc8b80f736ab8">tls_initialize</a>())
<a name="l00529"></a>00529                 <span class="keywordflow">return</span>(0);
<a name="l00530"></a>00530 <span class="keywordflow">return</span>(1);
<a name="l00531"></a>00531 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4fbc9156965f65f09310cf64e954abdd"></a><!-- doxytag: member="generic_server::initialize_plugin_object" ref="4fbc9156965f65f09310cf64e954abdd" args="(vector&lt; string &gt; plugin_parms, GENERIC_PLUGIN *plugin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/ddf/classgeneric__plugin.html">GENERIC_PLUGIN</a> * generic_server::initialize_plugin_object           </td>
          <td>(</td>
          <td class="paramtype">vector&lt; string &gt;&nbsp;</td>
          <td class="paramname"> <em>plugin_parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/ddf/classgeneric__plugin.html">GENERIC_PLUGIN</a> *&nbsp;</td>
          <td class="paramname"> <em>plugin</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update plug-in object with plug-in specific configuration parameters from plug-in conf file.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>plugin_parms</em>&nbsp;</td><td>Vector that holds plug-in configuration details. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>plugin</em>&nbsp;</td><td>Plug-in object to be updated. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Updated plugin object or NULL on error. </dd></dl>

<p>
Definition at line <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l01138">1138</a> of file <a class="el" href="../../de/dd9/generic__server_8cpp-source.html">generic_server.cpp</a>.
<p>
References <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00505">generic_plugin::bootstrap_init()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00193">bootstrap_jobs</a>, <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00499">generic_plugin::bootstrap_name()</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00276">check_enabled_plugin()</a>, <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00237">generic_plugin::get_plugin_name()</a>, <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00267">generic_plugin::get_tls_flag()</a>, <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00324">generic_plugin::initialize_socket()</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00094">log()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00049">LOG_LOW</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00187">pinstance</a>, <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00139">generic_plugin::pinstance</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00059">PLUGIN_CONF</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00053">PLUGIN_NAME</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00056">PLUGIN_NUMBER</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00676">plugin_read_conf_file()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00054">PLUGIN_TYPE</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00055">PORT</a>, <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00197">generic_plugin::server_init()</a>, <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00117">generic_plugin::set_conf_file()</a>, <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00110">generic_plugin::set_plugin()</a>, <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00124">generic_plugin::set_plugin_name()</a>, <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00131">generic_plugin::set_plugin_number()</a>, <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00138">generic_plugin::set_plugin_path()</a>, <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00166">generic_plugin::set_port()</a>, <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00152">generic_plugin::set_socket()</a>, <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00145">generic_plugin::set_tls_flag()</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l01202">setnonblocking()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00057">SHARED_LIB_PATH</a>, <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00081">SOCKET</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00058">TLS_FLAG</a>, and <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00217">tls_setup_reqd</a>.
<p>
Referenced by <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00472">init()</a>, and <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l01060">reload_conf_file()</a>.<div class="fragment"><pre class="fragment"><a name="l01139"></a>01139 {
<a name="l01140"></a>01140         <span class="keywordtype">int</span> ret;
<a name="l01141"></a>01141         ostringstream os;
<a name="l01142"></a>01142         <a class="code" href="../../db/de0/generic__plugin_8h.html#8b7037c483cc61d0d3d19c0b5280140c">SOCKET</a> ListenSocket;
<a name="l01143"></a>01143         string bootstrap_name;;
<a name="l01144"></a>01144 
<a name="l01145"></a>01145         plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#dd5a4b41b18aa8af5184287160b2b5e8">set_port</a>(atoi(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#4e302f269172f2bec464797d045afb76">PORT</a>).c_str()));
<a name="l01146"></a>01146         plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#e57d121a8264dc5bba35ce04ef1d4f20">set_plugin</a>(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#e15b5d272c0634f79544a7b24f1d4abb">PLUGIN_TYPE</a>));
<a name="l01147"></a>01147         plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#b99e8cdc9f997ba4ecb9a1b4a36e56c8">set_plugin_name</a>(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#1ee768562b9caa3b85eaf164209891fe">PLUGIN_NAME</a>));
<a name="l01148"></a>01148         plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#1b885ab5b58d45ff1de275aa3dd5feb4">set_plugin_number</a>(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#c53d064f58b638ba4eb430aeccce7237">PLUGIN_NUMBER</a>));
<a name="l01149"></a>01149         plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#346550df7ba2d362526b6c66bd332687">set_plugin_path</a>(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#ef27c6c066fcfa1ad69b35e8fd56b160">SHARED_LIB_PATH</a>));
<a name="l01150"></a>01150         plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#c91933375e91d599b8695a63e9fc0b00">set_tls_flag</a>(atoi(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#505d3d6854f1082049dd8e4d7e8a06c5">TLS_FLAG</a>).c_str()));
<a name="l01151"></a>01151         memcpy(&amp;plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#a8250a3a8c1c454ff2123f048ed0f69b">pinstance</a>,&amp;<a class="code" href="../../d8/d97/classgeneric__server.html#3071e1b18f12acfc8ab5adcd0f8e4d46">pinstance</a>,4);
<a name="l01152"></a>01152         <span class="keywordflow">if</span>( (ListenSocket = plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#5d60a994215bdca70aeff629d5c63528">initialize_socket</a>(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#4e302f269172f2bec464797d045afb76">PORT</a>))) == 0)
<a name="l01153"></a>01153                 <span class="keywordflow">return</span>(NULL);
<a name="l01154"></a>01154         plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#2bb605c94b32e6f8e52b79fa1326f191">set_socket</a>(ListenSocket);
<a name="l01155"></a>01155         <span class="keywordflow">if</span>(plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#f98679e1732de39b106e9e486ba5de04">get_tls_flag</a>())
<a name="l01156"></a>01156                 <a class="code" href="../../d8/d97/classgeneric__server.html#38ff93b9b41a964eb2ecc01d001c7d58">tls_setup_reqd</a> = 1;
<a name="l01157"></a>01157         <span class="keywordflow">if</span>(plugin_parms.size() &gt; <a class="code" href="../../d7/d71/generic__server_8h.html#4385462b80b4bdf095be53dbe9a61394">PLUGIN_CONF</a>)
<a name="l01158"></a>01158         {
<a name="l01159"></a>01159                 plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#94a7b6e56f423586efaeb42f26887acb">set_conf_file</a>(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#4385462b80b4bdf095be53dbe9a61394">PLUGIN_CONF</a>));
<a name="l01160"></a>01160                 ret = <a class="code" href="../../d8/d97/classgeneric__server.html#b98dd74bccc571f3f1ab75bd2d931b62">plugin_read_conf_file</a>(plugin,0);
<a name="l01161"></a>01161         <span class="keywordflow">if</span>(!ret)         <span class="comment">// read in plugin_specific config parameters</span>
<a name="l01162"></a>01162         {
<a name="l01163"></a>01163             os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN plugin_init failed for: "</span> &lt;&lt; plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#a9147641595f28a5762c9e4e35241fe6">get_plugin_name</a>() &lt;&lt; endl;
<a name="l01164"></a>01164             <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l01165"></a>01165             <span class="keywordflow">return</span>(NULL);
<a name="l01166"></a>01166                 }
<a name="l01167"></a>01167         }
<a name="l01168"></a>01168         bootstrap_name = plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#9783b90635b2a17fa38adfc826a7cdab">bootstrap_name</a>();
<a name="l01169"></a>01169         map&lt;string,bool&gt;::iterator it = <a class="code" href="../../d8/d97/classgeneric__server.html#5f8c18c5449ef7caef10feb698aad367">bootstrap_jobs</a>.find(bootstrap_name);
<a name="l01170"></a>01170         <span class="keywordflow">if</span>(it == <a class="code" href="../../d8/d97/classgeneric__server.html#5f8c18c5449ef7caef10feb698aad367">bootstrap_jobs</a>.end() &amp;&amp; bootstrap_name != <span class="stringliteral">""</span>)
<a name="l01171"></a>01171         {
<a name="l01172"></a>01172                 os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN Invoking bootstrap: "</span> &lt;&lt; bootstrap_name &lt;&lt; <span class="stringliteral">" on plug-in: "</span> &lt;&lt; plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#a9147641595f28a5762c9e4e35241fe6">get_plugin_name</a>();
<a name="l01173"></a>01173                 <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l01174"></a>01174                 os.str(<span class="stringliteral">""</span>);
<a name="l01175"></a>01175                 os.clear();
<a name="l01176"></a>01176                 <span class="keywordflow">if</span>(!plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#c2ca2cad8f3fc2559d37d4f347269794">bootstrap_init</a>(bootstrap_name))
<a name="l01177"></a>01177                 {
<a name="l01178"></a>01178                         os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN failed to bootstrap: "</span> &lt;&lt; bootstrap_name &lt;&lt; <span class="stringliteral">" on plug-in: "</span> &lt;&lt; plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#a9147641595f28a5762c9e4e35241fe6">get_plugin_name</a>();
<a name="l01179"></a>01179             <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l01180"></a>01180             <span class="keywordflow">return</span>(NULL);
<a name="l01181"></a>01181                 }
<a name="l01182"></a>01182                 <a class="code" href="../../d8/d97/classgeneric__server.html#5f8c18c5449ef7caef10feb698aad367">bootstrap_jobs</a>[bootstrap_name] = <span class="keyword">true</span>;
<a name="l01183"></a>01183                 os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN Successfully bootstrapped: "</span> &lt;&lt;  bootstrap_name &lt;&lt; <span class="stringliteral">" on plug-in: "</span> &lt;&lt; plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#a9147641595f28a5762c9e4e35241fe6">get_plugin_name</a>();
<a name="l01184"></a>01184                 <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l01185"></a>01185                 os.str(<span class="stringliteral">""</span>);
<a name="l01186"></a>01186                 os.clear();
<a name="l01187"></a>01187         }
<a name="l01188"></a>01188         <span class="keywordflow">if</span>(!<a class="code" href="../../d8/d97/classgeneric__server.html#3b65da5e615e62d6633cbabc1e3daa49">check_enabled_plugin</a>(plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#e15b5d272c0634f79544a7b24f1d4abb">PLUGIN_TYPE</a>)))
<a name="l01189"></a>01189         {
<a name="l01190"></a>01190                 <span class="keywordflow">if</span>(!plugin-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#fbe948be6035378307035e75411c21ed">server_init</a>()) <span class="comment">// Will do only once per plugin type</span>
<a name="l01191"></a>01191                 {
<a name="l01192"></a>01192                         os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN thread. server_init failed for: "</span> &lt;&lt; plugin_parms.at(<a class="code" href="../../d7/d71/generic__server_8h.html#e15b5d272c0634f79544a7b24f1d4abb">PLUGIN_TYPE</a>) &lt;&lt; endl;
<a name="l01193"></a>01193                         <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l01194"></a>01194                         <span class="keywordflow">return</span>(NULL);
<a name="l01195"></a>01195                 }
<a name="l01196"></a>01196         }
<a name="l01197"></a>01197         <a class="code" href="../../d8/d97/classgeneric__server.html#f48ce920374208468c6ba771ffd96dbf">setnonblocking</a>(ListenSocket);
<a name="l01198"></a>01198         <span class="keywordflow">return</span>(plugin);
<a name="l01199"></a>01199 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6f2ff972bd2afdc6aadd94e2f6fe5504"></a><!-- doxytag: member="generic_server::load_shared_lib" ref="6f2ff972bd2afdc6aadd94e2f6fe5504" args="(string library_image, string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/ddf/classgeneric__plugin.html">GENERIC_PLUGIN</a> * generic_server::load_shared_lib           </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>library_image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Dynamically loads plug-in shared library.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>library_image</em>&nbsp;</td><td>Path to shared library image. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>plugin_type</em>&nbsp;</td><td>PLUGIN_TYPE to load. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>function pointer to 'create_instance()' factory method of loaded plug-in. NULL on error. </dd></dl>

<p>
Definition at line <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00599">599</a> of file <a class="el" href="../../de/dd9/generic__server_8cpp-source.html">generic_server.cpp</a>.
<p>
References <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00182">dll_handles</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00189">factory</a>, <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00204">generic_plugin::get_plugin_version()</a>, <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00094">log()</a>, and <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00049">LOG_LOW</a>.
<p>
Referenced by <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l00472">init()</a>, and <a class="el" href="../../de/dd9/generic__server_8cpp-source.html#l01060">reload_conf_file()</a>.<div class="fragment"><pre class="fragment"><a name="l00600"></a>00600 {
<a name="l00601"></a>00601         <a class="code" href="../../d9/ddf/classgeneric__plugin.html">GENERIC_PLUGIN</a> *plugin_p;
<a name="l00602"></a>00602         ostringstream os;
<a name="l00603"></a>00603 
<a name="l00604"></a>00604 <span class="preprocessor">#ifndef WINDOWS</span>
<a name="l00605"></a>00605 <span class="preprocessor"></span>        <span class="keywordtype">void</span>* handle = dlopen(library_image.c_str(),RTLD_LAZY);
<a name="l00606"></a>00606         <span class="keywordflow">if</span>(handle == NULL)
<a name="l00607"></a>00607         {
<a name="l00608"></a>00608         os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN Can't load DLL: "</span> &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt;  dlerror();
<a name="l00609"></a>00609         <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l00610"></a>00610                 <span class="keywordflow">return</span>(NULL);
<a name="l00611"></a>00611         }
<a name="l00612"></a>00612         <a class="code" href="../../d8/d97/classgeneric__server.html#357d142f41337b54c3ae386ea02cc1a5">factory</a>[plugin_type] = (<a class="code" href="../../d7/d71/generic__server_8h.html#3d28a25e45080e8cafdb15c64c0f8ea0">create_fp</a>) dlsym(handle, <span class="stringliteral">"create_instance"</span>);
<a name="l00613"></a>00613         <a class="code" href="../../d8/d97/classgeneric__server.html#9f739db18cb300d0f17215c93e59c039">dll_handles</a>[plugin_type] =  (<span class="keywordtype">void</span> *) handle;
<a name="l00614"></a>00614 <span class="preprocessor">#else</span>
<a name="l00615"></a>00615 <span class="preprocessor"></span>        HMODULE handle;
<a name="l00616"></a>00616         handle = LoadLibrary(library_image.c_str());
<a name="l00617"></a>00617         <span class="keywordflow">if</span>(handle == NULL)
<a name="l00618"></a>00618         {
<a name="l00619"></a>00619                 os.str(<span class="stringliteral">""</span>);
<a name="l00620"></a>00620         os.clear();
<a name="l00621"></a>00621         os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN Error loading: "</span> &lt;&lt; library_image &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; GetLastError();
<a name="l00622"></a>00622         <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l00623"></a>00623                 <span class="keywordflow">return</span>(NULL);
<a name="l00624"></a>00624         }
<a name="l00625"></a>00625         <a class="code" href="../../d8/d97/classgeneric__server.html#357d142f41337b54c3ae386ea02cc1a5">factory</a>[plugin_type] = (<a class="code" href="../../d7/d71/generic__server_8h.html#3d28a25e45080e8cafdb15c64c0f8ea0">create_fp</a>) GetProcAddress(handle, <span class="stringliteral">"create_instance"</span>);
<a name="l00626"></a>00626         <a class="code" href="../../d8/d97/classgeneric__server.html#9f739db18cb300d0f17215c93e59c039">dll_handles</a>[plugin_type] = (<span class="keywordtype">void</span> *) handle;
<a name="l00627"></a>00627 <span class="preprocessor">#endif</span>
<a name="l00628"></a>00628 <span class="preprocessor"></span>        <span class="keywordflow">if</span>(<a class="code" href="../../d8/d97/classgeneric__server.html#357d142f41337b54c3ae386ea02cc1a5">factory</a>[plugin_type] == NULL)
<a name="l00629"></a>00629         {
<a name="l00630"></a>00630         os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN Can't instantiate PLUGIN_TYPE: "</span> &lt;&lt; plugin_type;
<a name="l00631"></a>00631         <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l00632"></a>00632                 <span class="keywordflow">return</span>(NULL);
<a name="l00633"></a>00633         }
<a name="l00634"></a>00634         plugin_p = (<a class="code" href="../../d8/d97/classgeneric__server.html#357d142f41337b54c3ae386ea02cc1a5">factory</a>[plugin_type])();
<a name="l00635"></a>00635     os  &lt;&lt; <span class="stringliteral">" Thr.ID:MAIN loaded plugin version: "</span> &lt;&lt; plugin_p-&gt;<a class="code" href="../../d9/ddf/classgeneric__plugin.html#e922e3783bb20f08b66cd4e1ed0b68ef">get_plugin_version</a>() &lt;&lt; <span class="stringliteral">" for PLUGIN_TYPE: "</span> &lt;&lt; plugin_type;
<a name="l00636"></a>00636     <a class="code" href="../../d8/d97/classgeneric__server.html#b2642379662463b93d4c1cbb017b40df">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,os.str());
<a name="l00637"></a>00637         <span class="keywordflow">return</span>(plugin_p);
<a name="l00638"></a>00638 }
</pre></div>
<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>framework/<a class="el" href="../../d0/d3a/generic__server_8h-source.html">generic_server.h</a><li>framework/<a class="el" href="../../de/dd9/generic__server_8cpp-source.html">generic_server.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Tue Aug 6 17:08:26 2013 for GENERIC_SERVER by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
