<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GENERIC_SERVER: sample_plugin Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="../../classes.html"><span>Classes</span></a></li>
    <li><a href="../../files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="../../classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>sample_plugin Class Reference</h1><!-- doxytag: class="sample_plugin" --><!-- doxytag: inherits="generic_plugin" -->Derived from GENERIC_PLUGIN. Implements virtual functions and all plug-in specific functionality.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="../../da/d99/sample_8h-source.html">sample.h</a>&gt;</code>
<p>
<p>Inheritance diagram for sample_plugin:
<p><center><img src="../../db/da1/classsample__plugin.png" usemap="#sample_plugin_map" border="0" alt=""></center>
<map name="sample_plugin_map">
<area href="../../d9/ddf/classgeneric__plugin.html" alt="generic_plugin" shape="rect" coords="0,0,96,24">
</map>
<a href="../../d2/d55/classsample__plugin-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a8aed16d47f69455910b842079df0cfd"></a><!-- doxytag: member="sample_plugin::sample_plugin" ref="a8aed16d47f69455910b842079df0cfd" args="(void)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#a8aed16d47f69455910b842079df0cfd">sample_plugin</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1633d1f57062ae270f7bf61097417309"></a><!-- doxytag: member="sample_plugin::sample_plugin" ref="1633d1f57062ae270f7bf61097417309" args="(char *, int)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#1633d1f57062ae270f7bf61097417309">sample_plugin</a> (char *, int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#ee66197c3b96fd333b20f0e6e09678de">shutdown_plugin</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#6471b04e68e7bf41f228bcecf2a13d65">plugin_init</a> (int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#0da6ae3e83e66c9520a2ab5eca736be3">server_init</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#7b2a9be3de26aac13516d66a19f9538c">server_shutdown</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#1efb17d5f19353e70c24989c0355493b">process_request</a> (void *, void *, unsigned int &amp;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="aeac8ce96f72c01bc4d9d7482cb07011"></a><!-- doxytag: member="sample_plugin::init" ref="aeac8ce96f72c01bc4d9d7482cb07011" args="(void)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>init</b> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e58ce5fe77b1bd6576fdaa0ee5ab52a6"></a><!-- doxytag: member="sample_plugin::init" ref="e58ce5fe77b1bd6576fdaa0ee5ab52a6" args="(int)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>init</b> (int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="586417a9076bf8bf5b501574c9aac386"></a><!-- doxytag: member="sample_plugin::get_plugin_version" ref="586417a9076bf8bf5b501574c9aac386" args="(void)" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#586417a9076bf8bf5b501574c9aac386">get_plugin_version</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#843d0150ef2dc39999b6f1061b0e4eaa">get_plugin_params</a> (string line)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="59c836c7c90df90b36f716c33cdde8ee"></a><!-- doxytag: member="sample_plugin::operator=" ref="59c836c7c90df90b36f716c33cdde8ee" args="(const sample_plugin &amp;)" -->
<a class="el" href="../../db/da1/classsample__plugin.html">sample_plugin</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#59c836c7c90df90b36f716c33cdde8ee">operator=</a> (const <a class="el" href="../../db/da1/classsample__plugin.html">sample_plugin</a> &amp;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#f1da9273fb39f3eabb96001afedd7ebe">bootstrap_name</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#af0ec8d7d30d456f645fd86cf2409dfc">bootstrap_init</a> (string)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#38dd2a493c5f90a2a4acbbcb09f5f229">bootstrap_terminate</a> (string)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2bf0ee764be59e9c90935c566f19d60e"></a><!-- doxytag: member="sample_plugin::~sample_plugin" ref="2bf0ee764be59e9c90935c566f19d60e" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#2bf0ee764be59e9c90935c566f19d60e">~sample_plugin</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d7194101489d4ac062fc50edfbe7cda7"></a><!-- doxytag: member="sample_plugin::db_name" ref="d7194101489d4ac062fc50edfbe7cda7" args="" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#d7194101489d4ac062fc50edfbe7cda7">db_name</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="968267e26154d58e3f3138fa81d0b072"></a><!-- doxytag: member="sample_plugin::db_passwd" ref="968267e26154d58e3f3138fa81d0b072" args="" -->
string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da1/classsample__plugin.html#968267e26154d58e3f3138fa81d0b072">db_passwd</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Derived from GENERIC_PLUGIN. Implements virtual functions and all plug-in specific functionality. 
<p>

<p>
Definition at line <a class="el" href="../../da/d99/sample_8h-source.html#l00038">38</a> of file <a class="el" href="../../da/d99/sample_8h-source.html">sample.h</a>.<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="af0ec8d7d30d456f645fd86cf2409dfc"></a><!-- doxytag: member="sample_plugin::bootstrap_init" ref="af0ec8d7d30d456f645fd86cf2409dfc" args="(string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sample_plugin::bootstrap_init           </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method gets invoked by the framework when it is being booted up. This method is invoked only once per 'bootstrap_name', each time framework is started up. If there are three plug-ins in <a class="el" href="../../d8/d97/classgeneric__server.html">generic_server</a> conf file, all of them belonging to different plug-in types and each of them defines the same 'bootstrap_name', then this method gets called only once when the first plug-in is loaded Please note, this method gets invoked during framework start-up time - not during client session initiation. This would be the place to do stuff like: <ul>
<li>Any one-time initialization (not per session) required by plug-ins belonging to different plug-in types </li>
<li>Dynamically load any shared library required by any plug-in </li>
</ul>

<p>
Reimplemented from <a class="el" href="../../d9/ddf/classgeneric__plugin.html#c2ca2cad8f3fc2559d37d4f347269794">generic_plugin</a>.
<p>
Definition at line <a class="el" href="../../d3/d15/sample_8cpp-source.html#l00218">218</a> of file <a class="el" href="../../d3/d15/sample_8cpp-source.html">sample.cpp</a>.<div class="fragment"><pre class="fragment"><a name="l00219"></a>00219 {
<a name="l00220"></a>00220         <span class="comment">// Do all bootstrapping stuff here. Load dlls,shared libs, initialize 3rd party apps etc</span>
<a name="l00221"></a>00221         <span class="comment">// Don't bother about thread sync here, Framework will take care of it!</span>
<a name="l00222"></a>00222         <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00223"></a>00223 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="f1da9273fb39f3eabb96001afedd7ebe"></a><!-- doxytag: member="sample_plugin::bootstrap_name" ref="f1da9273fb39f3eabb96001afedd7ebe" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string sample_plugin::bootstrap_name           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
GENERIC_SERVER framework provides a feature where plug-ins could request framework to call one or more bootstrap methods when framework is being bootsrapped. Any plug-in could implement 'bootstrap' methods. 'bootstrap_name' is the name associated with a specific 'bootstrap' method. Plug-ins should be co-operative and set differnet bootstrap_names to identify and implement different tasks. Under no circumstances should different plug-ins define the same 'bootstrap_name', if such a case should ever occur, framework will ignore the latter defined and implemented bootstrap method. 
<p>
Reimplemented from <a class="el" href="../../d9/ddf/classgeneric__plugin.html#9783b90635b2a17fa38adfc826a7cdab">generic_plugin</a>.
<p>
Definition at line <a class="el" href="../../d3/d15/sample_8cpp-source.html#l00212">212</a> of file <a class="el" href="../../d3/d15/sample_8cpp-source.html">sample.cpp</a>.<div class="fragment"><pre class="fragment"><a name="l00213"></a>00213 {
<a name="l00214"></a>00214         <span class="keywordflow">return</span>(string(<span class="stringliteral">"INIT_SMART_CARD"</span>));
<a name="l00215"></a>00215 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="38dd2a493c5f90a2a4acbbcb09f5f229"></a><!-- doxytag: member="sample_plugin::bootstrap_terminate" ref="38dd2a493c5f90a2a4acbbcb09f5f229" args="(string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sample_plugin::bootstrap_terminate           </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>bootstrap_name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the opposite of 'bootstrap_init()', framework invokes this method once for a 'bootstrap_name' when framework is being terminated. 
<p>
Reimplemented from <a class="el" href="../../d9/ddf/classgeneric__plugin.html#d6311edeae45fb7637de872a74dc27c2">generic_plugin</a>.
<p>
Definition at line <a class="el" href="../../d3/d15/sample_8cpp-source.html#l00226">226</a> of file <a class="el" href="../../d3/d15/sample_8cpp-source.html">sample.cpp</a>.<div class="fragment"><pre class="fragment"><a name="l00227"></a>00227 {
<a name="l00228"></a>00228     <span class="comment">// Do all bootstrapping cleanup stuff here. Unload dlls,shared libs,3rd party apps etc</span>
<a name="l00229"></a>00229     <span class="comment">// Don't bother about thread sync here, Framework will take care of it!</span>
<a name="l00230"></a>00230     <span class="keywordflow">return</span>(<span class="keyword">true</span>);
<a name="l00231"></a>00231 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="843d0150ef2dc39999b6f1061b0e4eaa"></a><!-- doxytag: member="sample_plugin::get_plugin_params" ref="843d0150ef2dc39999b6f1061b0e4eaa" args="(string line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sample_plugin::get_plugin_params           </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>line</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read plug-in configuration data<p>
Framework presents configuration information from plug-in conf file to be processed. This method will be invoked once per line in plug-in conf file. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>line</em>&nbsp;</td><td>One line from plug-in conf file. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>1 on success, 0 on failure. </dd></dl>

<p>
Reimplemented from <a class="el" href="../../d9/ddf/classgeneric__plugin.html#c35f33bad8ebab822e65152e9d649de1">generic_plugin</a>.
<p>
Definition at line <a class="el" href="../../d3/d15/sample_8cpp-source.html#l00195">195</a> of file <a class="el" href="../../d3/d15/sample_8cpp-source.html">sample.cpp</a>.
<p>
References <a class="el" href="../../da/d99/sample_8h-source.html#l00041">db_name</a>, <a class="el" href="../../da/d99/sample_8h-source.html#l00041">db_passwd</a>, and <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00422">generic_plugin::get_plugin_params()</a>.<div class="fragment"><pre class="fragment"><a name="l00196"></a>00196 {
<a name="l00197"></a>00197     <a class="code" href="../../d9/ddf/classgeneric__plugin.html#c35f33bad8ebab822e65152e9d649de1">generic_plugin::get_plugin_params</a>(line);
<a name="l00198"></a>00198     <span class="keywordflow">if</span> (line.size() &gt; 8 &amp;&amp; line.compare(0,8,<span class="stringliteral">"DB_NAME="</span>) == 0)
<a name="l00199"></a>00199     {
<a name="l00200"></a>00200         <a class="code" href="../../db/da1/classsample__plugin.html#d7194101489d4ac062fc50edfbe7cda7">db_name</a> = line.substr(8);
<a name="l00201"></a>00201         <span class="keywordflow">return</span>(0);
<a name="l00202"></a>00202     }
<a name="l00203"></a>00203     <span class="keywordflow">if</span> (line.size() &gt; 10 &amp;&amp; line.compare(0,10,<span class="stringliteral">"DB_PASSWD="</span>) == 0)
<a name="l00204"></a>00204     {
<a name="l00205"></a>00205         <a class="code" href="../../db/da1/classsample__plugin.html#968267e26154d58e3f3138fa81d0b072">db_passwd</a> = line.substr(10);
<a name="l00206"></a>00206         <span class="keywordflow">return</span>(0);
<a name="l00207"></a>00207     }
<a name="l00208"></a>00208     <span class="keywordflow">return</span>(1);
<a name="l00209"></a>00209 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6471b04e68e7bf41f228bcecf2a13d65"></a><!-- doxytag: member="sample_plugin::plugin_init" ref="6471b04e68e7bf41f228bcecf2a13d65" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sample_plugin::plugin_init           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>thread_no</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize plug-in<p>
This method gets invoked whenever a new client session gets initiated. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>thread_no</em>&nbsp;</td><td>The thread number assigned to plug-in. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>1 on success, 0 on failure. </dd></dl>

<p>
Reimplemented from <a class="el" href="../../d9/ddf/classgeneric__plugin.html#8ad2ca292f4f791587674ddee2be5ae0">generic_plugin</a>.
<p>
Definition at line <a class="el" href="../../d3/d15/sample_8cpp-source.html#l00079">79</a> of file <a class="el" href="../../d3/d15/sample_8cpp-source.html">sample.cpp</a>.
<p>
References <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00491">generic_plugin::log()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00051">LOG_HI</a>, and <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00122">generic_plugin::plugin_name</a>.<div class="fragment"><pre class="fragment"><a name="l00080"></a>00080 {
<a name="l00081"></a>00081     ostringstream oss;
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     <span class="keywordflow">try</span>
<a name="l00084"></a>00084     {
<a name="l00085"></a>00085         oss &lt;&lt; <span class="stringliteral">" Thr.ID:"</span> &lt;&lt; thread_no &lt;&lt; <span class="stringliteral">" Plugin:"</span> &lt;&lt; <a class="code" href="../../d9/ddf/classgeneric__plugin.html#defe5c77232fdd788c414b8a4c264a02">plugin_name</a> &lt;&lt; <span class="stringliteral">" Successfully initialized session."</span>;
<a name="l00086"></a>00086         <a class="code" href="../../d9/ddf/classgeneric__plugin.html#58dbbd73bd09401c27cbb8cf784aa8db">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#53d20793c8eaf0c3ec70581b8703f4eb">LOG_HI</a>,oss.str());
<a name="l00087"></a>00087         <span class="keywordflow">return</span>(1);
<a name="l00088"></a>00088     }
<a name="l00089"></a>00089     <span class="keywordflow">catch</span>(<span class="keyword">const</span> exception&amp; er)
<a name="l00090"></a>00090     {
<a name="l00091"></a>00091         oss &lt;&lt; <span class="stringliteral">" Thr.ID:"</span> &lt;&lt; thread_no &lt;&lt; <span class="stringliteral">" Plugin:"</span> &lt;&lt; plugin_name &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; er.what();
<a name="l00092"></a>00092         <a class="code" href="../../d9/ddf/classgeneric__plugin.html#58dbbd73bd09401c27cbb8cf784aa8db">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#53d20793c8eaf0c3ec70581b8703f4eb">LOG_HI</a>,oss.str());
<a name="l00093"></a>00093         <span class="keywordflow">return</span>(0);
<a name="l00094"></a>00094     }
<a name="l00095"></a>00095 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="1efb17d5f19353e70c24989c0355493b"></a><!-- doxytag: member="sample_plugin::process_request" ref="1efb17d5f19353e70c24989c0355493b" args="(void *, void *, unsigned int &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sample_plugin::process_request           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>out_buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int &amp;&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handle client request<p>
Framework presents client input data to plug-in to process. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buffer</em>&nbsp;</td><td>Request sent by client. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>outbuff</em>&nbsp;</td><td>Response to be sent back to client. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>inout]</em>&nbsp;</td><td>send_bytes Size of input buffer sent by client, function sets this to size of outbuff. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TERMINATE_SESSION to indicate plug-in done with the session with client or CONTINUE_SESSION to indicate plug-in want to continue session with client and process more requests. </dd></dl>

<p>
Reimplemented from <a class="el" href="../../d9/ddf/classgeneric__plugin.html#d9bf73146bf8c29796e300b4847c9254">generic_plugin</a>.
<p>
Definition at line <a class="el" href="../../d3/d15/sample_8cpp-source.html#l00169">169</a> of file <a class="el" href="../../d3/d15/sample_8cpp-source.html">sample.cpp</a>.
<p>
References <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00088">CONTINUE_SESSION</a>, <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00491">generic_plugin::log()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00049">LOG_LOW</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00065">MAX_SZ</a>, <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00139">generic_plugin::pinstance</a>, <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00122">generic_plugin::plugin_name</a>, <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00089">TERMINATE_SESSION</a>, and <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00119">generic_plugin::thread_id</a>.<div class="fragment"><pre class="fragment"><a name="l00170"></a>00170 {
<a name="l00171"></a>00171     <a class="code" href="../../d8/d97/classgeneric__server.html">generic_server</a> *fwork = (<a class="code" href="../../d8/d97/classgeneric__server.html">generic_server</a> *) <a class="code" href="../../d9/ddf/classgeneric__plugin.html#a8250a3a8c1c454ff2123f048ed0f69b">pinstance</a>;
<a name="l00172"></a>00172     ostringstream oss;
<a name="l00173"></a>00173 
<a name="l00174"></a>00174         memset(out_buff,0,<a class="code" href="../../d7/d71/generic__server_8h.html#aaad26210242f40f69323a1adcc711ba">MAX_SZ</a>);
<a name="l00175"></a>00175     oss &lt;&lt; <span class="stringliteral">" Thr.ID:"</span> &lt;&lt; <a class="code" href="../../d9/ddf/classgeneric__plugin.html#db495747d8fd2c5241f84aa08c784398">thread_id</a> &lt;&lt; <span class="stringliteral">" Plugin:"</span> &lt;&lt; <a class="code" href="../../d9/ddf/classgeneric__plugin.html#defe5c77232fdd788c414b8a4c264a02">plugin_name</a> &lt;&lt; <span class="stringliteral">" Received: "</span> &lt;&lt; string((<span class="keywordtype">char</span> *)buffer,size);
<a name="l00176"></a>00176     <a class="code" href="../../d9/ddf/classgeneric__plugin.html#58dbbd73bd09401c27cbb8cf784aa8db">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#319b3d81d98069eab40e6da17932252a">LOG_LOW</a>,oss.str());
<a name="l00177"></a>00177         <span class="keywordflow">if</span>(!memcmp(buffer,<span class="stringliteral">"QUIT"</span>,4))
<a name="l00178"></a>00178         {
<a name="l00179"></a>00179                 size = 12;
<a name="l00180"></a>00180                 memcpy((<span class="keywordtype">char</span> *)out_buff,<span class="stringliteral">"00 TERMINATE"</span>,size);
<a name="l00181"></a>00181                 <span class="keywordflow">return</span>(<a class="code" href="../../db/de0/generic__plugin_8h.html#3ada9d05b52975349e77efed48f468ee">TERMINATE_SESSION</a>);
<a name="l00182"></a>00182         }
<a name="l00183"></a>00183         size = 22;
<a name="l00184"></a>00184         memcpy((<span class="keywordtype">char</span> *)out_buff,<span class="stringliteral">"response from plugin.."</span>,size);
<a name="l00185"></a>00185     <span class="keywordflow">return</span>(<a class="code" href="../../db/de0/generic__plugin_8h.html#6bf140d328dddc43c853def5751dfa7a">CONTINUE_SESSION</a>);
<a name="l00186"></a>00186 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0da6ae3e83e66c9520a2ab5eca736be3"></a><!-- doxytag: member="sample_plugin::server_init" ref="0da6ae3e83e66c9520a2ab5eca736be3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sample_plugin::server_init           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method gets invoked by the framework once per plug-in type when it is getting started. Please note, this method is invoked only ONCE for a particular plug-in type. If there are three plug-ins in <a class="el" href="../../d8/d97/classgeneric__server.html">generic_server</a> conf file, all of them belonging to same plug-in_type, then this method gets called only once when the first plug-in is loaded. Please note, this method gets invoked during framework start-up in the MAIN thread. This would be the place to do stuff like:<p>
<ul>
<li>Any one-time initialization (not per session) required by one or plug-in(s) belonging to same plug-in type </li>
<li>Store any information required to be shared across multiple instances of a plug-in into plug-in object as 'static' variable(s) </li>
</ul>

<p>
Reimplemented from <a class="el" href="../../d9/ddf/classgeneric__plugin.html#fbe948be6035378307035e75411c21ed">generic_plugin</a>.
<p>
Definition at line <a class="el" href="../../d3/d15/sample_8cpp-source.html#l00131">131</a> of file <a class="el" href="../../d3/d15/sample_8cpp-source.html">sample.cpp</a>.
<p>
References <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00491">generic_plugin::log()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00051">LOG_HI</a>, and <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00122">generic_plugin::plugin_name</a>.<div class="fragment"><pre class="fragment"><a name="l00132"></a>00132 {
<a name="l00133"></a>00133     ostringstream oss;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     <span class="keywordflow">try</span>
<a name="l00136"></a>00136     {
<a name="l00137"></a>00137         oss &lt;&lt; <span class="stringliteral">" Thr.ID: MAIN Plugin:"</span> &lt;&lt; <a class="code" href="../../d9/ddf/classgeneric__plugin.html#defe5c77232fdd788c414b8a4c264a02">plugin_name</a> &lt;&lt; <span class="stringliteral">" Successfully initialized sample server."</span>;
<a name="l00138"></a>00138         <a class="code" href="../../d9/ddf/classgeneric__plugin.html#58dbbd73bd09401c27cbb8cf784aa8db">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#53d20793c8eaf0c3ec70581b8703f4eb">LOG_HI</a>,oss.str());
<a name="l00139"></a>00139         <span class="keywordflow">return</span>(1);
<a name="l00140"></a>00140     }
<a name="l00141"></a>00141     <span class="keywordflow">catch</span>(<span class="keyword">const</span> exception&amp; er)
<a name="l00142"></a>00142     {
<a name="l00143"></a>00143         oss &lt;&lt; <span class="stringliteral">" Thr.ID: MAIN Plugin:"</span> &lt;&lt; plugin_name &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; er.what();
<a name="l00144"></a>00144         <a class="code" href="../../d9/ddf/classgeneric__plugin.html#58dbbd73bd09401c27cbb8cf784aa8db">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#53d20793c8eaf0c3ec70581b8703f4eb">LOG_HI</a>,oss.str());
<a name="l00145"></a>00145         <span class="keywordflow">return</span>(0);
<a name="l00146"></a>00146     }
<a name="l00147"></a>00147 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7b2a9be3de26aac13516d66a19f9538c"></a><!-- doxytag: member="sample_plugin::server_shutdown" ref="7b2a9be3de26aac13516d66a19f9538c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sample_plugin::server_shutdown           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the opposite of 'server_init()', framework invokes this method when a plug-in is removed from <a class="el" href="../../d8/d97/classgeneric__server.html">generic_server</a> conf file. Similar to 'server_init()', 'server_shutdown()' gets invoked only once when the last plug-in of a plug-in_type is removed. 
<p>
Reimplemented from <a class="el" href="../../d9/ddf/classgeneric__plugin.html#d59d8e3ece9bd286ca8a464d989546e6">generic_plugin</a>.
<p>
Definition at line <a class="el" href="../../d3/d15/sample_8cpp-source.html#l00150">150</a> of file <a class="el" href="../../d3/d15/sample_8cpp-source.html">sample.cpp</a>.
<p>
References <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00491">generic_plugin::log()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00051">LOG_HI</a>, and <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00122">generic_plugin::plugin_name</a>.<div class="fragment"><pre class="fragment"><a name="l00151"></a>00151 {
<a name="l00152"></a>00152     ostringstream oss;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154     <span class="keywordflow">try</span>
<a name="l00155"></a>00155     {
<a name="l00156"></a>00156         oss &lt;&lt; <span class="stringliteral">" Thr.ID: MAIN Plugin:"</span> &lt;&lt; <a class="code" href="../../d9/ddf/classgeneric__plugin.html#defe5c77232fdd788c414b8a4c264a02">plugin_name</a> &lt;&lt; <span class="stringliteral">" Successfully shutdown sample server."</span>;
<a name="l00157"></a>00157         <a class="code" href="../../d9/ddf/classgeneric__plugin.html#58dbbd73bd09401c27cbb8cf784aa8db">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#53d20793c8eaf0c3ec70581b8703f4eb">LOG_HI</a>,oss.str());
<a name="l00158"></a>00158         <span class="keywordflow">return</span>(1);
<a name="l00159"></a>00159     }
<a name="l00160"></a>00160     <span class="keywordflow">catch</span>(<span class="keyword">const</span> exception&amp; er)
<a name="l00161"></a>00161     {
<a name="l00162"></a>00162         oss &lt;&lt; <span class="stringliteral">" Thr.ID: MAIN Plugin:"</span> &lt;&lt; plugin_name &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; er.what();
<a name="l00163"></a>00163         <a class="code" href="../../d9/ddf/classgeneric__plugin.html#58dbbd73bd09401c27cbb8cf784aa8db">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#53d20793c8eaf0c3ec70581b8703f4eb">LOG_HI</a>,oss.str());
<a name="l00164"></a>00164         <span class="keywordflow">return</span>(0);
<a name="l00165"></a>00165     }
<a name="l00166"></a>00166 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ee66197c3b96fd333b20f0e6e09678de"></a><!-- doxytag: member="sample_plugin::shutdown_plugin" ref="ee66197c3b96fd333b20f0e6e09678de" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sample_plugin::shutdown_plugin           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the opposite of 'plugin_init()', framework invokes this method when a client session is getting terminated. 
<p>
Reimplemented from <a class="el" href="../../d9/ddf/classgeneric__plugin.html#6c1da54f389da73d56a1496963ba71f3">generic_plugin</a>.
<p>
Definition at line <a class="el" href="../../d3/d15/sample_8cpp-source.html#l00110">110</a> of file <a class="el" href="../../d3/d15/sample_8cpp-source.html">sample.cpp</a>.
<p>
References <a class="el" href="../../d3/dd8/generic__plugin_8cpp-source.html#l00491">generic_plugin::log()</a>, <a class="el" href="../../d0/d3a/generic__server_8h-source.html#l00051">LOG_HI</a>, <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00139">generic_plugin::pinstance</a>, <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00122">generic_plugin::plugin_name</a>, and <a class="el" href="../../da/ddb/generic__plugin_8h-source.html#l00119">generic_plugin::thread_id</a>.<div class="fragment"><pre class="fragment"><a name="l00111"></a>00111 {
<a name="l00112"></a>00112     ostringstream oss;
<a name="l00113"></a>00113     <a class="code" href="../../d8/d97/classgeneric__server.html">generic_server</a> *fwork = (<a class="code" href="../../d8/d97/classgeneric__server.html">generic_server</a> *) <a class="code" href="../../d9/ddf/classgeneric__plugin.html#a8250a3a8c1c454ff2123f048ed0f69b">pinstance</a>;    
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <span class="keywordflow">try</span>
<a name="l00116"></a>00116     {
<a name="l00117"></a>00117 <span class="comment">//      Do plug-in cleanup here..</span>
<a name="l00118"></a>00118         oss &lt;&lt; <span class="stringliteral">" Thr.ID:"</span> &lt;&lt; <a class="code" href="../../d9/ddf/classgeneric__plugin.html#db495747d8fd2c5241f84aa08c784398">thread_id</a> &lt;&lt; <span class="stringliteral">" Plugin:"</span> &lt;&lt; <a class="code" href="../../d9/ddf/classgeneric__plugin.html#defe5c77232fdd788c414b8a4c264a02">plugin_name</a> &lt;&lt; <span class="stringliteral">" Successfully shutdown session."</span>;
<a name="l00119"></a>00119         <a class="code" href="../../d9/ddf/classgeneric__plugin.html#58dbbd73bd09401c27cbb8cf784aa8db">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#53d20793c8eaf0c3ec70581b8703f4eb">LOG_HI</a>,oss.str());
<a name="l00120"></a>00120     }
<a name="l00121"></a>00121     <span class="keywordflow">catch</span>(<span class="keyword">const</span> exception&amp; er)
<a name="l00122"></a>00122     {
<a name="l00123"></a>00123         oss &lt;&lt; <span class="stringliteral">" Thr.ID: MAIN Plugin:"</span> &lt;&lt; plugin_name &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; er.what();
<a name="l00124"></a>00124         <a class="code" href="../../d9/ddf/classgeneric__plugin.html#58dbbd73bd09401c27cbb8cf784aa8db">log</a>(<a class="code" href="../../d7/d71/generic__server_8h.html#53d20793c8eaf0c3ec70581b8703f4eb">LOG_HI</a>,oss.str());
<a name="l00125"></a>00125         <span class="keywordflow">return</span> 0;
<a name="l00126"></a>00126     }
<a name="l00127"></a>00127         <span class="keywordflow">return</span>(1);
<a name="l00128"></a>00128 }
</pre></div>
<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>plugins/sample/<a class="el" href="../../da/d99/sample_8h-source.html">sample.h</a><li>plugins/sample/<a class="el" href="../../d3/d15/sample_8cpp-source.html">sample.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Tue Aug 6 17:08:26 2013 for GENERIC_SERVER by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
