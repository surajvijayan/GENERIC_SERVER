<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>GENERIC_SERVER: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GENERIC_SERVER
   &#160;<span id="projectnumber">0.0.0.9</span>
   </div>
   <div id="projectbrief">A light-weight, cross-platform, pluggable, extensible and secure framework for deploying C++ plug-ins.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">GENERIC_SERVER Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h3>Table of Contents</h3>
<p><a class="el" href="index.html#IN">Introduction</a> <br/>
 <a class="el" href="index.html#FE">Features</a> <br/>
 <a class="el" href="index.html#MK">Building GENERIC_SERVER</a> <br/>
 <a class="el" href="index.html#WI">WINDOWS server startup</a> <br/>
 <a class="el" href="index.html#LI">LINUX server startup</a> <br/>
 <a class="el" href="index.html#SE">Server configuration</a> <br/>
 <a class="el" href="index.html#AR">Architecture</a> <br/>
 <a class="el" href="index.html#mp">Message Structure</a> <br/>
 <a class="el" href="index.html#gt">Git Page</a> <br/>
 <a class="el" href="index.html#au">Author</a> <br/>
 <a class="el" href="index.html#li">License</a> <br/>
</p>
<h1><a class="anchor" id="IN"></a>
Introduction</h1>
<pre class="fragment">GENERIC_SERVER is a cross-platform, pluggable, extensible, secure framework for deploying C++
plug-ins. Multi-threaded framework can support multiple plug-ins. GENERIC_SERVER 
makes extensive use of pluggable shared libraries to 'plugin' specific functionality to the 
framework. Framework dynamically loads,unloads plug-ins and dispatches each plug-in in a separate
thread.

Plug-ins would just focus on implementing business logic, framework handles plug-in lifecycle
management, network management, threads management and provides a host of other functionality that
any plug-in could utilitze.
</pre><h1><a class="anchor" id="FE"></a>
Features</h1>
<ul>
<li>Built-in support for TLS encryption. A flag in generic_server.conf file will enable or disable TLS/SSL encryption for a specific plug-in. X509 Certificates installed under CERT sub-directory are used for TLS/SSL implementation</li>
</ul>
<ul>
<li>All plug-ins are derived classes from a base class GENERIC_PLUGIN. Lot of functionality required for plug-ins are implemented in GENERIC_PLUGIN</li>
</ul>
<ul>
<li>Plug-in specific conf files. Configuration parameters specific for a plug-in should be configured in a conf file residing in plug-in specific directory</li>
</ul>
<ul>
<li>Multiple instances of framework can be running simultaneously, serving different group of plug-ins. Each instance would have a different process name</li>
</ul>
<ul>
<li>Framework managed log file, with log file rollover capability. Log can be redirected to 'syslog' on Linux and to Eventlog on Windows</li>
</ul>
<ul>
<li>Framework can authenticate all clients via X509 certificates. VERIFY_CLIENT option in main framework conf file can be used to disable/enable TLS certificate validation of client. Default is to disable TLS certificate validation</li>
</ul>
<ul>
<li>Framework can authorize all clients by enforcing clients to send &lt;PLUGIN_NAME&gt; as part of request payload. This is done by setting VALIDATE_PLUGIN flag to true for a specific plug-in in generic server configuration file.</li>
</ul>
<ul>
<li>Framework can support / service multiple plug-ins of same plug-in_type on one port. This is termed as an 'Alias' plug-in. An alias plug-in should be of same plug-in_type, have plugin shared library path and TLS flag as the primary plug-in. The first plug-in in generic_server.conf file for any plug-in_type is considered as the primary plug-in.</li>
</ul>
<p><br/>
 <br/>
 </p>
<h1><a class="anchor" id="MK"></a>
Building GENERIC_SERVER</h1>
<h2><a class="anchor" id="BL"></a>
Linux</h2>
<p>GENERIC_SERVER has been packaged as an Autoconf package. You could just: </p>
<pre>
        $ ./configure
        $ make
        $ make install
</pre><p> to build and install the framework. The following components would be built: </p>
<ul>
<li>libgeneric_plugin.1.0.so <br/>
 This is the shared library for <a class="el" href="da/df5/classgeneric__plugin.html" title="This component provides functionality that are common across plug-ins. Framework would instantiate an...">generic_plugin</a>. <br/>
 <br/>
 </li>
<li><a class="el" href="d1/db4/classgeneric__server.html" title="This is a singleton class and provides framework functionality.">generic_server</a> <br/>
 This is the <a class="el" href="d1/db4/classgeneric__server.html" title="This is a singleton class and provides framework functionality.">generic_server</a> executable. <br/>
 <br/>
 </li>
<li>libsample.1.0.so <br/>
 This is the shared library for sample plug-in. <br/>
 <br/>
 </li>
<li>sample_client <br/>
 This is a sample client program that can be used to interface with GENERIC_SERVER. <br/>
 <br/>
 </li>
</ul>
<h2><a class="anchor" id="BW"></a>
Windows</h2>
<p>A Visual Studio solution is available to build GENERIC_SERVER on Windows. This is generic_server.sln under WINDOWS/generic_server directory. Visual Studio 2010 has been used to develop and test on Windows. This solution has five projects: </p>
<ul>
<li><a class="el" href="da/df5/classgeneric__plugin.html" title="This component provides functionality that are common across plug-ins. Framework would instantiate an...">generic_plugin</a> <br/>
 Builds generic_plugin.dll <br/>
 <br/>
 </li>
<li><a class="el" href="d1/db4/classgeneric__server.html" title="This is a singleton class and provides framework functionality.">generic_server</a> <br/>
 Builds generic_server.exe <br/>
 <br/>
 </li>
<li><a class="el" href="d3/ded/classsample__plugin.html" title="Derived from GENERIC_PLUGIN. Implements virtual functions and all plug-in specific functionality...">sample_plugin</a> <br/>
 Builds sample_plugin.dll When building on Windows, please start off by building <a class="el" href="da/df5/classgeneric__plugin.html" title="This component provides functionality that are common across plug-ins. Framework would instantiate an...">generic_plugin</a> project. generic_plugin.lib is required by <a class="el" href="d1/db4/classgeneric__server.html" title="This is a singleton class and provides framework functionality.">generic_server</a> and <a class="el" href="d3/ded/classsample__plugin.html" title="Derived from GENERIC_PLUGIN. Implements virtual functions and all plug-in specific functionality...">sample_plugin</a> projects. <br/>
 <br/>
 </li>
<li>sample_client <br/>
 This is a sample client program that can be used to interface with GENERIC_SERVER. <br/>
 <br/>
 </li>
<li>GenericServer <br/>
 This is the Windows installer project. It creates an .msi file. <br/>
 <br/>
 </li>
</ul>
<h1><a class="anchor" id="WI"></a>
WINDOWS server startup</h1>
<pre class="fragment">   GENERIC_SERVER is a true Windows service. Generic_Server cleanly handles Windows service events. Service
   Manager can be used to have fine-grained control over generic_server process.
</pre><h2><a class="anchor" id="IS"></a>
Install new service</h2>
<pre class="fragment">      Edit generic_server.conf file in install directory and ensure correct path is configured for different files and plug-ins.
  Assuming framework is installed under C:\generic_server directory, the following command should be used to install GENERIC_SERVER
  service:
      C:\generic_server&gt;generic_server -i &lt;SERVICE_NAME&gt; &lt;INSTANCE_SPECIFIC_CONF_FILE&gt;

      Example:
      C:\generic_server&gt;generic_server -i MAIN_SERVER  generic_server.conf

   Once the above step is done, a service named MAIN_SERVER will be created on Windows.
</pre><h2><a class="anchor" id="VE"></a>
Verify service Installation</h2>
<pre class="fragment">   Go to Windows Service Manager and confirm a service named &lt;SERVICE_NAME&gt; is installed.

   Start --&gt; Control Panel --&gt; Administrative Tools --&gt; Services
</pre><h2><a class="anchor" id="TE"></a>
Test the Server</h2>
<ul>
<li>Go to service manager and start one or more GENERIC_SERVER service(s) </li>
<li>Use sample_client program to connect to configured port and send request to framework / plug-in being tested. <pre>
        Example:
        $ ./sample_client x.x.x.x 60103 TEST_PLUGIN "Hello from sample_client.." 2 1
</pre> </li>
</ul>
<h1><a class="anchor" id="LI"></a>
LINUX server startup</h1>
<pre class="fragment">     Run the command:

     # generic_server &lt;INSTANCE_NAME&gt; &lt;INSTANCE_SPECIFIC_CONF_FILE&gt;

     Example:
     # generic_server MAIN_SERVER generic_server.conf
</pre><p><br/>
 <br/>
 </p>
<h1><a class="anchor" id="SE"></a>
Server configuration</h1>
<pre>
        A sample server configuration file is shown below:</pre><pre>        LOG_FILE=/tmp/TEST/generic_server.log
        #LOG_FILE=SYSLOG
        # This is the seconds interval a thread will do idle wait client
        TIMEOUT_SECONDS=300
        # Max. concurrent threads the will framework will spawn for all devices
        MAX_THREADS=100
        # next 2 entries are self-explanatory
        MAX_LOG_SIZE_IN_MB=100
        MAX_LOGS_SAVED=5
        # TLS certificate in PEM format, if TLS is enabled for any device
        SERVER_CERTIFICATE=/tmp/TEST/CERT/generic_server.crt
        # TLS private_key in PEM format, if TLS is enabled for any device
        RSA_PRIVATE_KEY=/tmp/TEST/CERT/generic_server.key
        # CA cert file
        CA_CERTIFICATE=/tmp/TEST//CERT/CAfile.pem
        #VERIFY_CLIENT option will validate client TLS certificate. Default is
        #not to validate certificates. 
        VERIFY_CLIENT=0
        # COMMAND_PORT should be unique per instance. Please set any free port 
        COMMAND_PORT=10000
        # PLUGINS_PATH set the base DIR of plugins shared library / DLL
        PLUGINS_PATH=/tmp/TEST/plugins
        #
        #PLUGIN_NAME|PLUGIN_TYPE|TCP_PORT|PLUGIN_NUMBER|PLUGIN_SHARED_LIBRARY|TLS_FLAG|PLUGIN_SPECIFIC_CONF_FILE
        #PLUGIN_SPECIFIC_CONF_FILE and PLUGIN LIB path is relative to server install directory
        #
        SAMPLE1|SAMPLE_TYPE|60103|1|sample/libsample.1.0.so|1|sample/sample.conf
        SAMPLE2|SAMPLE_TYPE|60103|2|sample/libsample.1.0.so|1|sample/sample.conf
        SAMPLE3|SAMPLE3_TYPE|60105|3|sample3/libsample.1.0.so|1|sample3/sample3.conf
        SAMPLE4|SAMPLE4_TYPE|60106|4|sample4/libsample.1.0.so|1|sample4/sample4.conf
</pre><p> <br/>
 <br/>
 </p>
<h1><a class="anchor" id="AR"></a>
Architecture</h1>
<pre class="fragment">    GENERIC_SERVER has the following main components:
</pre><h2><a class="anchor" id="FR"></a>
Framework</h2>
<pre class="fragment">    This is a singleton class and provides framework functionality. Source files are in: framework directory.
</pre><h2><a class="anchor" id="GE"></a>
Generic Plugin</h2>
<pre class="fragment">    This component provides functionality that are common across plug-ins. Source files are in
    generic_plugin directory. Framework would instantiate and load objects of type GENERIC_PLUGIN 
    to framework from plugin shared library. Generic_plugin is packaged into a shared library:
    libgeneric_plugin.so or generic_plugin.dll.
</pre><h2><a class="anchor" id="PL"></a>
Plug-ins</h2>
<pre class="fragment">    Plug-ins are where business logic gets implemented. All plug-ins should derive from class GENERIC_PLUGIN
    and should have a function named create_instance(). A sample plug-in is in directory: plugins/sample.
</pre><h2><a class="anchor" id="Control"></a>
Control</h2>
<p>Master program that bootstraps GENERIC_SERVER. Source is in <a class="el" href="d0/d92/control_8cpp_source.html">control.cpp</a>. Listens and does 'select()'on all sockets configured in generic_server.conf file. Spawns a thread for each plug-in and runs message loop for that plug-in. <br/>
 <br/>
 </p>
<h1><a class="anchor" id="DY"></a>
Dynamically re-load plug-ins</h1>
<pre class="fragment"> Generic_Server has been designed to easily enable addition or deletion of
 plug-ins to the framework without restartng the framework:
</pre><h2><a class="anchor" id="wi"></a>
WINDOWS</h2>
<pre class="fragment">     Add or remove plug-ins from generic_server.conf file, then go to service manager and 
     'pause' and 'resume' the service &lt;SERVICE_NAME&gt;. Check out log file to ensure server has
     picked up the changes.
</pre><h2><a class="anchor" id="lii"></a>
Linux</h2>
<pre class="fragment">     Add or remove plug-ins from generic_server conf file and then send signal SIGHUP to 
     generic_server process via 'kill' command. Check out log file to ensure server has
     picked up the changes.
</pre><h1><a class="anchor" id="mp"></a>
Message Structure</h1>
<p>GENERIC_SERVER has been designed to provide flexibility to plug-ins on messaging structure and protocol. GENERIC_SERVER today implements a very simplified message structure shown below: </p>
<h2><a class="anchor" id="hdr"></a>
Message Header</h2>
<ul>
<li>SIGNATURE - 4 bytes SIGNATURE for all messages </li>
<li>PAYLOAD_SIZE - 4 bytes network byte order </li>
<li>DATA - PAYLOAD_SIZE data </li>
</ul>
<h2><a class="anchor" id="subhdr"></a>
Data payload</h2>
<ul>
<li>PLUGIN_NAME_LEN - 4 bytes network byte order (optional) </li>
<li>PLUGIN_NAME - Size as defined by &lt;PLUGIN_NAME_LEN&gt; (optional) </li>
<li>APPLICATION_DATA - PAYLOAD_SIZE-([4+PLUGIN_NAME_LEN]) <pre class="fragment">If VALIDATE_PLUGIN is set to 1 in  framework configuration file, then all client requests
    should have PLUGIN_NAME_LEN and PLUGIN_NAME within the message.
</pre></li>
</ul>
<h1><a class="anchor" id="ssl"></a>
OpenSSL</h1>
<h2><a class="anchor" id="sslwi"></a>
WINDOWS</h2>
<pre class="fragment">    OpenSSL 1.0 was used to develop and test GENERIC_SERVER for Windows. Please download and install
    OpenSSL windows development package from: 
    http://www.shininglightpro.com/download/Win32OpenSSL_Light-1_0_0a.exe
Once OpenSSL is installed, please ensure path to OpenSSL include and lib directories is correctly configured in all Visual Studio
    projects
</pre> <h2><a class="anchor" id="sslli"></a>
Linux</h2>
<pre class="fragment">    Please use platform specific tools to install OpenSSL development package for Linux.
</pre><h1><a class="anchor" id="gt"></a>
Git Page</h1>
<p>Git link for this project is at: <a href="https://github.com/surajvijayan/GENERIC_SERVER">https://github.com/surajvijayan/GENERIC_SERVER</a></p>
<h1><a class="anchor" id="au"></a>
Author</h1>
<p>This has been developed by  Suraj Vijayan <a href="#" onclick="location.href='mai'+'lto:'+'sur'+'aj'+'@br'+'oa'+'dco'+'m.'+'com'; return false;">suraj<span style="display: none;">.nosp@m.</span>@bro<span style="display: none;">.nosp@m.</span>adcom<span style="display: none;">.nosp@m.</span>.com</a>.</p>
<h1><a class="anchor" id="li"></a>
License</h1>
<pre class="fragment">    This program is free software; you can redistribute it and/or
    modify it under the terms of the GNU Lesser General Public
    License as published by the Free Software Foundation; either
    version 2.1 of the License, or (at your option) any later version.

    This library is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
    Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public
    License along with this library; if not, write to the Free Software
    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 16 2013 01:24:13 for GENERIC_SERVER by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
